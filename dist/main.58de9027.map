{"version":3,"sources":["js\\html2canvas.js","js\\main.js","..\\node_modules\\parcel-bundler\\src\\builtins\\bundle-url.js","..\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"],"names":["f","exports","module","define","amd","g","window","global","self","html2canvas","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","key","error","type","RangeError","map","array","fn","result","mapDomain","string","parts","split","replace","labels","encoded","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","w","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","hasOwnProperty","log","restoreOwnerScroll","ownerDocument","x","y","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","canvas","clonedCanvas","width","height","getContext","putImageData","getImageData","cloneNode","node","javascriptEnabled","clone","document","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","options","documentElement","container","createElement","className","style","visibility","position","left","top","border","scrolling","body","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","b","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","then","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","Object","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","right","bottom","parser","ready","crop","scale","origBounds","cropBounds","cleanupContainer","parentNode","removeChild","croppedCanvas","x1","max","x2","y1","y2","drawImage","documentWidth","doc","scrollWidth","offsetWidth","clientWidth","documentHeight","scrollHeight","offsetHeight","clientHeight","url","link","href","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","inverseTransform","matrixInverse","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","c","d","det","M","val","indexOf","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","mask","renderShadows","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","ucs2","wordRendering","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontVariantLigatures","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","pathArgs","parseBackgroundClip","pathBounds","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","drawSidePath","topLeft","topRight","bottomRightOuter","bottomRightInner","bottomRight","bottomLeftOuter","bottomLeftInner","bottomLeft","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","bezierCurve","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","curve1","curve2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","html","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","shape","boxShadow","shadow","renderBorder","dash","setLineDash","path","strokeStyle","stroke","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","dpi","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","strokeColor","parseShadow","propertyFilters","px","pxPropertyNames","info","drawShadow","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","borderClip","canvasBorderCCW","maskShape","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","toDataURL","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","xhr","status","responseText","statusText","send","normalizecss","bundleURL","getBundleURLCached","getBundleURL","err","getBaseURL","bundle","updateLink","newLink","remove","cssTimeout","reloadCSS","links","querySelectorAll"],"mappings":"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","file":"main.58de9027.map","sourceRoot":"..\\src","sourcesContent":["/*\r\n  html2canvas 0.5.0-beta4 <http://html2canvas.hertzen.com>\r\n  Copyright (c) 2017 Niklas von Hertzen\r\n  2017-06-14 Custom build by Erik Koopmans, featuring latest bugfixes and features\r\n\r\n  Released under MIT License\r\n*/\r\n\r\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.html2canvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\r\n(function (global){\r\n/*! https://mths.be/punycode v1.4.1 by @mathias */\r\n;(function(root) {\r\n\r\n    /** Detect free variables */\r\n    var freeExports = typeof exports == 'object' && exports &&\r\n        !exports.nodeType && exports;\r\n    var freeModule = typeof module == 'object' && module &&\r\n        !module.nodeType && module;\r\n    var freeGlobal = typeof global == 'object' && global;\r\n    if (\r\n        freeGlobal.global === freeGlobal ||\r\n        freeGlobal.window === freeGlobal ||\r\n        freeGlobal.self === freeGlobal\r\n    ) {\r\n        root = freeGlobal;\r\n    }\r\n\r\n    /**\r\n     * The `punycode` object.\r\n     * @name punycode\r\n     * @type Object\r\n     */\r\n    var punycode,\r\n\r\n    /** Highest positive signed 32-bit float value */\r\n    maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\r\n\r\n    /** Bootstring parameters */\r\n    base = 36,\r\n    tMin = 1,\r\n    tMax = 26,\r\n    skew = 38,\r\n    damp = 700,\r\n    initialBias = 72,\r\n    initialN = 128, // 0x80\r\n    delimiter = '-', // '\\x2D'\r\n\r\n    /** Regular expressions */\r\n    regexPunycode = /^xn--/,\r\n    regexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\r\n    regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\r\n\r\n    /** Error messages */\r\n    errors = {\r\n        'overflow': 'Overflow: input needs wider integers to process',\r\n        'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\r\n        'invalid-input': 'Invalid input'\r\n    },\r\n\r\n    /** Convenience shortcuts */\r\n    baseMinusTMin = base - tMin,\r\n    floor = Math.floor,\r\n    stringFromCharCode = String.fromCharCode,\r\n\r\n    /** Temporary variable */\r\n    key;\r\n\r\n    /*--------------------------------------------------------------------------*/\r\n\r\n    /**\r\n     * A generic error utility function.\r\n     * @private\r\n     * @param {String} type The error type.\r\n     * @returns {Error} Throws a `RangeError` with the applicable error message.\r\n     */\r\n    function error(type) {\r\n        throw new RangeError(errors[type]);\r\n    }\r\n\r\n    /**\r\n     * A generic `Array#map` utility function.\r\n     * @private\r\n     * @param {Array} array The array to iterate over.\r\n     * @param {Function} callback The function that gets called for every array\r\n     * item.\r\n     * @returns {Array} A new array of values returned by the callback function.\r\n     */\r\n    function map(array, fn) {\r\n        var length = array.length;\r\n        var result = [];\r\n        while (length--) {\r\n            result[length] = fn(array[length]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * A simple `Array#map`-like wrapper to work with domain name strings or email\r\n     * addresses.\r\n     * @private\r\n     * @param {String} domain The domain name or email address.\r\n     * @param {Function} callback The function that gets called for every\r\n     * character.\r\n     * @returns {Array} A new string of characters returned by the callback\r\n     * function.\r\n     */\r\n    function mapDomain(string, fn) {\r\n        var parts = string.split('@');\r\n        var result = '';\r\n        if (parts.length > 1) {\r\n            // In email addresses, only the domain name should be punycoded. Leave\r\n            // the local part (i.e. everything up to `@`) intact.\r\n            result = parts[0] + '@';\r\n            string = parts[1];\r\n        }\r\n        // Avoid `split(regex)` for IE8 compatibility. See #17.\r\n        string = string.replace(regexSeparators, '\\x2E');\r\n        var labels = string.split('.');\r\n        var encoded = map(labels, fn).join('.');\r\n        return result + encoded;\r\n    }\r\n\r\n    /**\r\n     * Creates an array containing the numeric code points of each Unicode\r\n     * character in the string. While JavaScript uses UCS-2 internally,\r\n     * this function will convert a pair of surrogate halves (each of which\r\n     * UCS-2 exposes as separate characters) into a single code point,\r\n     * matching UTF-16.\r\n     * @see `punycode.ucs2.encode`\r\n     * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n     * @memberOf punycode.ucs2\r\n     * @name decode\r\n     * @param {String} string The Unicode input string (UCS-2).\r\n     * @returns {Array} The new array of code points.\r\n     */\r\n    function ucs2decode(string) {\r\n        var output = [],\r\n            counter = 0,\r\n            length = string.length,\r\n            value,\r\n            extra;\r\n        while (counter < length) {\r\n            value = string.charCodeAt(counter++);\r\n            if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n                // high surrogate, and there is a next character\r\n                extra = string.charCodeAt(counter++);\r\n                if ((extra & 0xFC00) == 0xDC00) { // low surrogate\r\n                    output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\r\n                } else {\r\n                    // unmatched surrogate; only append this code unit, in case the next\r\n                    // code unit is the high surrogate of a surrogate pair\r\n                    output.push(value);\r\n                    counter--;\r\n                }\r\n            } else {\r\n                output.push(value);\r\n            }\r\n        }\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * Creates a string based on an array of numeric code points.\r\n     * @see `punycode.ucs2.decode`\r\n     * @memberOf punycode.ucs2\r\n     * @name encode\r\n     * @param {Array} codePoints The array of numeric code points.\r\n     * @returns {String} The new Unicode string (UCS-2).\r\n     */\r\n    function ucs2encode(array) {\r\n        return map(array, function(value) {\r\n            var output = '';\r\n            if (value > 0xFFFF) {\r\n                value -= 0x10000;\r\n                output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\r\n                value = 0xDC00 | value & 0x3FF;\r\n            }\r\n            output += stringFromCharCode(value);\r\n            return output;\r\n        }).join('');\r\n    }\r\n\r\n    /**\r\n     * Converts a basic code point into a digit/integer.\r\n     * @see `digitToBasic()`\r\n     * @private\r\n     * @param {Number} codePoint The basic numeric code point value.\r\n     * @returns {Number} The numeric value of a basic code point (for use in\r\n     * representing integers) in the range `0` to `base - 1`, or `base` if\r\n     * the code point does not represent a value.\r\n     */\r\n    function basicToDigit(codePoint) {\r\n        if (codePoint - 48 < 10) {\r\n            return codePoint - 22;\r\n        }\r\n        if (codePoint - 65 < 26) {\r\n            return codePoint - 65;\r\n        }\r\n        if (codePoint - 97 < 26) {\r\n            return codePoint - 97;\r\n        }\r\n        return base;\r\n    }\r\n\r\n    /**\r\n     * Converts a digit/integer into a basic code point.\r\n     * @see `basicToDigit()`\r\n     * @private\r\n     * @param {Number} digit The numeric value of a basic code point.\r\n     * @returns {Number} The basic code point whose value (when used for\r\n     * representing integers) is `digit`, which needs to be in the range\r\n     * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\r\n     * used; else, the lowercase form is used. The behavior is undefined\r\n     * if `flag` is non-zero and `digit` has no uppercase form.\r\n     */\r\n    function digitToBasic(digit, flag) {\r\n        //  0..25 map to ASCII a..z or A..Z\r\n        // 26..35 map to ASCII 0..9\r\n        return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\r\n    }\r\n\r\n    /**\r\n     * Bias adaptation function as per section 3.4 of RFC 3492.\r\n     * https://tools.ietf.org/html/rfc3492#section-3.4\r\n     * @private\r\n     */\r\n    function adapt(delta, numPoints, firstTime) {\r\n        var k = 0;\r\n        delta = firstTime ? floor(delta / damp) : delta >> 1;\r\n        delta += floor(delta / numPoints);\r\n        for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\r\n            delta = floor(delta / baseMinusTMin);\r\n        }\r\n        return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\r\n    }\r\n\r\n    /**\r\n     * Converts a Punycode string of ASCII-only symbols to a string of Unicode\r\n     * symbols.\r\n     * @memberOf punycode\r\n     * @param {String} input The Punycode string of ASCII-only symbols.\r\n     * @returns {String} The resulting string of Unicode symbols.\r\n     */\r\n    function decode(input) {\r\n        // Don't use UCS-2\r\n        var output = [],\r\n            inputLength = input.length,\r\n            out,\r\n            i = 0,\r\n            n = initialN,\r\n            bias = initialBias,\r\n            basic,\r\n            j,\r\n            index,\r\n            oldi,\r\n            w,\r\n            k,\r\n            digit,\r\n            t,\r\n            /** Cached calculation results */\r\n            baseMinusT;\r\n\r\n        // Handle the basic code points: let `basic` be the number of input code\r\n        // points before the last delimiter, or `0` if there is none, then copy\r\n        // the first basic code points to the output.\r\n\r\n        basic = input.lastIndexOf(delimiter);\r\n        if (basic < 0) {\r\n            basic = 0;\r\n        }\r\n\r\n        for (j = 0; j < basic; ++j) {\r\n            // if it's not a basic code point\r\n            if (input.charCodeAt(j) >= 0x80) {\r\n                error('not-basic');\r\n            }\r\n            output.push(input.charCodeAt(j));\r\n        }\r\n\r\n        // Main decoding loop: start just after the last delimiter if any basic code\r\n        // points were copied; start at the beginning otherwise.\r\n\r\n        for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\r\n\r\n            // `index` is the index of the next character to be consumed.\r\n            // Decode a generalized variable-length integer into `delta`,\r\n            // which gets added to `i`. The overflow checking is easier\r\n            // if we increase `i` as we go, then subtract off its starting\r\n            // value at the end to obtain `delta`.\r\n            for (oldi = i, w = 1, k = base; /* no condition */; k += base) {\r\n\r\n                if (index >= inputLength) {\r\n                    error('invalid-input');\r\n                }\r\n\r\n                digit = basicToDigit(input.charCodeAt(index++));\r\n\r\n                if (digit >= base || digit > floor((maxInt - i) / w)) {\r\n                    error('overflow');\r\n                }\r\n\r\n                i += digit * w;\r\n                t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\r\n                if (digit < t) {\r\n                    break;\r\n                }\r\n\r\n                baseMinusT = base - t;\r\n                if (w > floor(maxInt / baseMinusT)) {\r\n                    error('overflow');\r\n                }\r\n\r\n                w *= baseMinusT;\r\n\r\n            }\r\n\r\n            out = output.length + 1;\r\n            bias = adapt(i - oldi, out, oldi == 0);\r\n\r\n            // `i` was supposed to wrap around from `out` to `0`,\r\n            // incrementing `n` each time, so we'll fix that now:\r\n            if (floor(i / out) > maxInt - n) {\r\n                error('overflow');\r\n            }\r\n\r\n            n += floor(i / out);\r\n            i %= out;\r\n\r\n            // Insert `n` at position `i` of the output\r\n            output.splice(i++, 0, n);\r\n\r\n        }\r\n\r\n        return ucs2encode(output);\r\n    }\r\n\r\n    /**\r\n     * Converts a string of Unicode symbols (e.g. a domain name label) to a\r\n     * Punycode string of ASCII-only symbols.\r\n     * @memberOf punycode\r\n     * @param {String} input The string of Unicode symbols.\r\n     * @returns {String} The resulting Punycode string of ASCII-only symbols.\r\n     */\r\n    function encode(input) {\r\n        var n,\r\n            delta,\r\n            handledCPCount,\r\n            basicLength,\r\n            bias,\r\n            j,\r\n            m,\r\n            q,\r\n            k,\r\n            t,\r\n            currentValue,\r\n            output = [],\r\n            /** `inputLength` will hold the number of code points in `input`. */\r\n            inputLength,\r\n            /** Cached calculation results */\r\n            handledCPCountPlusOne,\r\n            baseMinusT,\r\n            qMinusT;\r\n\r\n        // Convert the input in UCS-2 to Unicode\r\n        input = ucs2decode(input);\r\n\r\n        // Cache the length\r\n        inputLength = input.length;\r\n\r\n        // Initialize the state\r\n        n = initialN;\r\n        delta = 0;\r\n        bias = initialBias;\r\n\r\n        // Handle the basic code points\r\n        for (j = 0; j < inputLength; ++j) {\r\n            currentValue = input[j];\r\n            if (currentValue < 0x80) {\r\n                output.push(stringFromCharCode(currentValue));\r\n            }\r\n        }\r\n\r\n        handledCPCount = basicLength = output.length;\r\n\r\n        // `handledCPCount` is the number of code points that have been handled;\r\n        // `basicLength` is the number of basic code points.\r\n\r\n        // Finish the basic string - if it is not empty - with a delimiter\r\n        if (basicLength) {\r\n            output.push(delimiter);\r\n        }\r\n\r\n        // Main encoding loop:\r\n        while (handledCPCount < inputLength) {\r\n\r\n            // All non-basic code points < n have been handled already. Find the next\r\n            // larger one:\r\n            for (m = maxInt, j = 0; j < inputLength; ++j) {\r\n                currentValue = input[j];\r\n                if (currentValue >= n && currentValue < m) {\r\n                    m = currentValue;\r\n                }\r\n            }\r\n\r\n            // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\r\n            // but guard against overflow\r\n            handledCPCountPlusOne = handledCPCount + 1;\r\n            if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\r\n                error('overflow');\r\n            }\r\n\r\n            delta += (m - n) * handledCPCountPlusOne;\r\n            n = m;\r\n\r\n            for (j = 0; j < inputLength; ++j) {\r\n                currentValue = input[j];\r\n\r\n                if (currentValue < n && ++delta > maxInt) {\r\n                    error('overflow');\r\n                }\r\n\r\n                if (currentValue == n) {\r\n                    // Represent delta as a generalized variable-length integer\r\n                    for (q = delta, k = base; /* no condition */; k += base) {\r\n                        t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n                        if (q < t) {\r\n                            break;\r\n                        }\r\n                        qMinusT = q - t;\r\n                        baseMinusT = base - t;\r\n                        output.push(\r\n                            stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\r\n                        );\r\n                        q = floor(qMinusT / baseMinusT);\r\n                    }\r\n\r\n                    output.push(stringFromCharCode(digitToBasic(q, 0)));\r\n                    bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\r\n                    delta = 0;\r\n                    ++handledCPCount;\r\n                }\r\n            }\r\n\r\n            ++delta;\r\n            ++n;\r\n\r\n        }\r\n        return output.join('');\r\n    }\r\n\r\n    /**\r\n     * Converts a Punycode string representing a domain name or an email address\r\n     * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\r\n     * it doesn't matter if you call it on a string that has already been\r\n     * converted to Unicode.\r\n     * @memberOf punycode\r\n     * @param {String} input The Punycoded domain name or email address to\r\n     * convert to Unicode.\r\n     * @returns {String} The Unicode representation of the given Punycode\r\n     * string.\r\n     */\r\n    function toUnicode(input) {\r\n        return mapDomain(input, function(string) {\r\n            return regexPunycode.test(string)\r\n                ? decode(string.slice(4).toLowerCase())\r\n                : string;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Converts a Unicode string representing a domain name or an email address to\r\n     * Punycode. Only the non-ASCII parts of the domain name will be converted,\r\n     * i.e. it doesn't matter if you call it with a domain that's already in\r\n     * ASCII.\r\n     * @memberOf punycode\r\n     * @param {String} input The domain name or email address to convert, as a\r\n     * Unicode string.\r\n     * @returns {String} The Punycode representation of the given domain name or\r\n     * email address.\r\n     */\r\n    function toASCII(input) {\r\n        return mapDomain(input, function(string) {\r\n            return regexNonASCII.test(string)\r\n                ? 'xn--' + encode(string)\r\n                : string;\r\n        });\r\n    }\r\n\r\n    /*--------------------------------------------------------------------------*/\r\n\r\n    /** Define the public API */\r\n    punycode = {\r\n        /**\r\n         * A string representing the current Punycode.js version number.\r\n         * @memberOf punycode\r\n         * @type String\r\n         */\r\n        'version': '1.4.1',\r\n        /**\r\n         * An object of methods to convert from JavaScript's internal character\r\n         * representation (UCS-2) to Unicode code points, and back.\r\n         * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n         * @memberOf punycode\r\n         * @type Object\r\n         */\r\n        'ucs2': {\r\n            'decode': ucs2decode,\r\n            'encode': ucs2encode\r\n        },\r\n        'decode': decode,\r\n        'encode': encode,\r\n        'toASCII': toASCII,\r\n        'toUnicode': toUnicode\r\n    };\r\n\r\n    /** Expose `punycode` */\r\n    // Some AMD build optimizers, like r.js, check for specific condition patterns\r\n    // like the following:\r\n    if (\r\n        typeof define == 'function' &&\r\n        typeof define.amd == 'object' &&\r\n        define.amd\r\n    ) {\r\n        define('punycode', function() {\r\n            return punycode;\r\n        });\r\n    } else if (freeExports && freeModule) {\r\n        if (module.exports == freeExports) {\r\n            // in Node.js, io.js, or RingoJS v0.8.0+\r\n            freeModule.exports = punycode;\r\n        } else {\r\n            // in Narwhal or RingoJS v0.7.0-\r\n            for (key in punycode) {\r\n                punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\r\n            }\r\n        }\r\n    } else {\r\n        // in Rhino or a web browser\r\n        root.punycode = punycode;\r\n    }\r\n\r\n}(this));\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{}],2:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction restoreOwnerScroll(ownerDocument, x, y) {\r\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\r\n        ownerDocument.defaultView.scrollTo(x, y);\r\n    }\r\n}\r\n\r\nfunction cloneCanvasContents(canvas, clonedCanvas) {\r\n    try {\r\n        if (clonedCanvas) {\r\n            clonedCanvas.width = canvas.width;\r\n            clonedCanvas.height = canvas.height;\r\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\r\n        }\r\n    } catch(e) {\r\n        log(\"Unable to copy canvas content from\", canvas, e);\r\n    }\r\n}\r\n\r\nfunction cloneNode(node, javascriptEnabled) {\r\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\r\n\r\n    var child = node.firstChild;\r\n    while(child) {\r\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\r\n            clone.appendChild(cloneNode(child, javascriptEnabled));\r\n        }\r\n        child = child.nextSibling;\r\n    }\r\n\r\n    if (node.nodeType === 1) {\r\n        clone._scrollTop = node.scrollTop;\r\n        clone._scrollLeft = node.scrollLeft;\r\n        if (node.nodeName === \"CANVAS\") {\r\n            cloneCanvasContents(node, clone);\r\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\r\n            clone.value = node.value;\r\n        }\r\n    }\r\n\r\n    return clone;\r\n}\r\n\r\nfunction initNode(node) {\r\n    if (node.nodeType === 1) {\r\n        node.scrollTop = node._scrollTop;\r\n        node.scrollLeft = node._scrollLeft;\r\n\r\n        var child = node.firstChild;\r\n        while(child) {\r\n            initNode(child);\r\n            child = child.nextSibling;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\r\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\r\n    var container = containerDocument.createElement(\"iframe\");\r\n\r\n    container.className = \"html2canvas-container\";\r\n    container.style.visibility = \"hidden\";\r\n    container.style.position = \"fixed\";\r\n    container.style.left = \"-10000px\";\r\n    container.style.top = \"0px\";\r\n    container.style.border = \"0\";\r\n    container.width = width;\r\n    container.height = height;\r\n    container.scrolling = \"no\"; // ios won't scroll without it\r\n    containerDocument.body.appendChild(container);\r\n\r\n    return new Promise(function(resolve) {\r\n        var documentClone = container.contentWindow.document;\r\n\r\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\r\n            if window url is about:blank, we can assign the url to current by writing onto the document\r\n            */\r\n        container.contentWindow.onload = container.onload = function() {\r\n            var interval = setInterval(function() {\r\n                if (documentClone.body.childNodes.length > 0) {\r\n                    initNode(documentClone.documentElement);\r\n                    clearInterval(interval);\r\n                    if (options.type === \"view\") {\r\n                        container.contentWindow.scrollTo(x, y);\r\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\r\n                            documentClone.documentElement.style.top = (-y) + \"px\";\r\n                            documentClone.documentElement.style.left = (-x) + \"px\";\r\n                            documentClone.documentElement.style.position = 'absolute';\r\n                        }\r\n                    }\r\n                    resolve(container);\r\n                }\r\n            }, 50);\r\n        };\r\n\r\n        documentClone.open();\r\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\r\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\r\n        restoreOwnerScroll(ownerDocument, x, y);\r\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\r\n        documentClone.close();\r\n    });\r\n};\r\n\r\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\r\n// http://dev.w3.org/csswg/css-color/\r\n\r\nfunction Color(value) {\r\n    this.r = 0;\r\n    this.g = 0;\r\n    this.b = 0;\r\n    this.a = null;\r\n    var result = this.fromArray(value) ||\r\n        this.namedColor(value) ||\r\n        this.rgb(value) ||\r\n        this.rgba(value) ||\r\n        this.hex6(value) ||\r\n        this.hex3(value);\r\n}\r\n\r\nColor.prototype.darken = function(amount) {\r\n    var a = 1 - amount;\r\n    return  new Color([\r\n        Math.round(this.r * a),\r\n        Math.round(this.g * a),\r\n        Math.round(this.b * a),\r\n        this.a\r\n    ]);\r\n};\r\n\r\nColor.prototype.isTransparent = function() {\r\n    return this.a === 0;\r\n};\r\n\r\nColor.prototype.isBlack = function() {\r\n    return this.r === 0 && this.g === 0 && this.b === 0;\r\n};\r\n\r\nColor.prototype.fromArray = function(array) {\r\n    if (Array.isArray(array)) {\r\n        this.r = Math.min(array[0], 255);\r\n        this.g = Math.min(array[1], 255);\r\n        this.b = Math.min(array[2], 255);\r\n        if (array.length > 3) {\r\n            this.a = array[3];\r\n        }\r\n    }\r\n\r\n    return (Array.isArray(array));\r\n};\r\n\r\nvar _hex3 = /^#([a-f0-9]{3})$/i;\r\n\r\nColor.prototype.hex3 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex3)) !== null) {\r\n        this.r = parseInt(match[1][0] + match[1][0], 16);\r\n        this.g = parseInt(match[1][1] + match[1][1], 16);\r\n        this.b = parseInt(match[1][2] + match[1][2], 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _hex6 = /^#([a-f0-9]{6})$/i;\r\n\r\nColor.prototype.hex6 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex6)) !== null) {\r\n        this.r = parseInt(match[1].substring(0, 2), 16);\r\n        this.g = parseInt(match[1].substring(2, 4), 16);\r\n        this.b = parseInt(match[1].substring(4, 6), 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\n\r\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\r\n\r\nColor.prototype.rgb = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgb)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\r\n\r\nColor.prototype.rgba = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgba)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n        this.a = Number(match[4]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nColor.prototype.toString = function() {\r\n    return this.a !== null && this.a !== 1 ?\r\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\r\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\r\n};\r\n\r\nColor.prototype.namedColor = function(value) {\r\n    value = value.toLowerCase();\r\n    var color = colors[value];\r\n    if (color) {\r\n        this.r = color[0];\r\n        this.g = color[1];\r\n        this.b = color[2];\r\n    } else if (value === \"transparent\") {\r\n        this.r = this.g = this.b = this.a = 0;\r\n        return true;\r\n    }\r\n\r\n    return !!color;\r\n};\r\n\r\nColor.prototype.isColor = true;\r\n\r\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\r\nvar colors = {\r\n    \"aliceblue\": [240, 248, 255],\r\n    \"antiquewhite\": [250, 235, 215],\r\n    \"aqua\": [0, 255, 255],\r\n    \"aquamarine\": [127, 255, 212],\r\n    \"azure\": [240, 255, 255],\r\n    \"beige\": [245, 245, 220],\r\n    \"bisque\": [255, 228, 196],\r\n    \"black\": [0, 0, 0],\r\n    \"blanchedalmond\": [255, 235, 205],\r\n    \"blue\": [0, 0, 255],\r\n    \"blueviolet\": [138, 43, 226],\r\n    \"brown\": [165, 42, 42],\r\n    \"burlywood\": [222, 184, 135],\r\n    \"cadetblue\": [95, 158, 160],\r\n    \"chartreuse\": [127, 255, 0],\r\n    \"chocolate\": [210, 105, 30],\r\n    \"coral\": [255, 127, 80],\r\n    \"cornflowerblue\": [100, 149, 237],\r\n    \"cornsilk\": [255, 248, 220],\r\n    \"crimson\": [220, 20, 60],\r\n    \"cyan\": [0, 255, 255],\r\n    \"darkblue\": [0, 0, 139],\r\n    \"darkcyan\": [0, 139, 139],\r\n    \"darkgoldenrod\": [184, 134, 11],\r\n    \"darkgray\": [169, 169, 169],\r\n    \"darkgreen\": [0, 100, 0],\r\n    \"darkgrey\": [169, 169, 169],\r\n    \"darkkhaki\": [189, 183, 107],\r\n    \"darkmagenta\": [139, 0, 139],\r\n    \"darkolivegreen\": [85, 107, 47],\r\n    \"darkorange\": [255, 140, 0],\r\n    \"darkorchid\": [153, 50, 204],\r\n    \"darkred\": [139, 0, 0],\r\n    \"darksalmon\": [233, 150, 122],\r\n    \"darkseagreen\": [143, 188, 143],\r\n    \"darkslateblue\": [72, 61, 139],\r\n    \"darkslategray\": [47, 79, 79],\r\n    \"darkslategrey\": [47, 79, 79],\r\n    \"darkturquoise\": [0, 206, 209],\r\n    \"darkviolet\": [148, 0, 211],\r\n    \"deeppink\": [255, 20, 147],\r\n    \"deepskyblue\": [0, 191, 255],\r\n    \"dimgray\": [105, 105, 105],\r\n    \"dimgrey\": [105, 105, 105],\r\n    \"dodgerblue\": [30, 144, 255],\r\n    \"firebrick\": [178, 34, 34],\r\n    \"floralwhite\": [255, 250, 240],\r\n    \"forestgreen\": [34, 139, 34],\r\n    \"fuchsia\": [255, 0, 255],\r\n    \"gainsboro\": [220, 220, 220],\r\n    \"ghostwhite\": [248, 248, 255],\r\n    \"gold\": [255, 215, 0],\r\n    \"goldenrod\": [218, 165, 32],\r\n    \"gray\": [128, 128, 128],\r\n    \"green\": [0, 128, 0],\r\n    \"greenyellow\": [173, 255, 47],\r\n    \"grey\": [128, 128, 128],\r\n    \"honeydew\": [240, 255, 240],\r\n    \"hotpink\": [255, 105, 180],\r\n    \"indianred\": [205, 92, 92],\r\n    \"indigo\": [75, 0, 130],\r\n    \"ivory\": [255, 255, 240],\r\n    \"khaki\": [240, 230, 140],\r\n    \"lavender\": [230, 230, 250],\r\n    \"lavenderblush\": [255, 240, 245],\r\n    \"lawngreen\": [124, 252, 0],\r\n    \"lemonchiffon\": [255, 250, 205],\r\n    \"lightblue\": [173, 216, 230],\r\n    \"lightcoral\": [240, 128, 128],\r\n    \"lightcyan\": [224, 255, 255],\r\n    \"lightgoldenrodyellow\": [250, 250, 210],\r\n    \"lightgray\": [211, 211, 211],\r\n    \"lightgreen\": [144, 238, 144],\r\n    \"lightgrey\": [211, 211, 211],\r\n    \"lightpink\": [255, 182, 193],\r\n    \"lightsalmon\": [255, 160, 122],\r\n    \"lightseagreen\": [32, 178, 170],\r\n    \"lightskyblue\": [135, 206, 250],\r\n    \"lightslategray\": [119, 136, 153],\r\n    \"lightslategrey\": [119, 136, 153],\r\n    \"lightsteelblue\": [176, 196, 222],\r\n    \"lightyellow\": [255, 255, 224],\r\n    \"lime\": [0, 255, 0],\r\n    \"limegreen\": [50, 205, 50],\r\n    \"linen\": [250, 240, 230],\r\n    \"magenta\": [255, 0, 255],\r\n    \"maroon\": [128, 0, 0],\r\n    \"mediumaquamarine\": [102, 205, 170],\r\n    \"mediumblue\": [0, 0, 205],\r\n    \"mediumorchid\": [186, 85, 211],\r\n    \"mediumpurple\": [147, 112, 219],\r\n    \"mediumseagreen\": [60, 179, 113],\r\n    \"mediumslateblue\": [123, 104, 238],\r\n    \"mediumspringgreen\": [0, 250, 154],\r\n    \"mediumturquoise\": [72, 209, 204],\r\n    \"mediumvioletred\": [199, 21, 133],\r\n    \"midnightblue\": [25, 25, 112],\r\n    \"mintcream\": [245, 255, 250],\r\n    \"mistyrose\": [255, 228, 225],\r\n    \"moccasin\": [255, 228, 181],\r\n    \"navajowhite\": [255, 222, 173],\r\n    \"navy\": [0, 0, 128],\r\n    \"oldlace\": [253, 245, 230],\r\n    \"olive\": [128, 128, 0],\r\n    \"olivedrab\": [107, 142, 35],\r\n    \"orange\": [255, 165, 0],\r\n    \"orangered\": [255, 69, 0],\r\n    \"orchid\": [218, 112, 214],\r\n    \"palegoldenrod\": [238, 232, 170],\r\n    \"palegreen\": [152, 251, 152],\r\n    \"paleturquoise\": [175, 238, 238],\r\n    \"palevioletred\": [219, 112, 147],\r\n    \"papayawhip\": [255, 239, 213],\r\n    \"peachpuff\": [255, 218, 185],\r\n    \"peru\": [205, 133, 63],\r\n    \"pink\": [255, 192, 203],\r\n    \"plum\": [221, 160, 221],\r\n    \"powderblue\": [176, 224, 230],\r\n    \"purple\": [128, 0, 128],\r\n    \"rebeccapurple\": [102, 51, 153],\r\n    \"red\": [255, 0, 0],\r\n    \"rosybrown\": [188, 143, 143],\r\n    \"royalblue\": [65, 105, 225],\r\n    \"saddlebrown\": [139, 69, 19],\r\n    \"salmon\": [250, 128, 114],\r\n    \"sandybrown\": [244, 164, 96],\r\n    \"seagreen\": [46, 139, 87],\r\n    \"seashell\": [255, 245, 238],\r\n    \"sienna\": [160, 82, 45],\r\n    \"silver\": [192, 192, 192],\r\n    \"skyblue\": [135, 206, 235],\r\n    \"slateblue\": [106, 90, 205],\r\n    \"slategray\": [112, 128, 144],\r\n    \"slategrey\": [112, 128, 144],\r\n    \"snow\": [255, 250, 250],\r\n    \"springgreen\": [0, 255, 127],\r\n    \"steelblue\": [70, 130, 180],\r\n    \"tan\": [210, 180, 140],\r\n    \"teal\": [0, 128, 128],\r\n    \"thistle\": [216, 191, 216],\r\n    \"tomato\": [255, 99, 71],\r\n    \"turquoise\": [64, 224, 208],\r\n    \"violet\": [238, 130, 238],\r\n    \"wheat\": [245, 222, 179],\r\n    \"white\": [255, 255, 255],\r\n    \"whitesmoke\": [245, 245, 245],\r\n    \"yellow\": [255, 255, 0],\r\n    \"yellowgreen\": [154, 205, 50]\r\n};\r\n\r\nmodule.exports = Color;\r\n\r\n},{}],4:[function(_dereq_,module,exports){\r\nvar Support = _dereq_('./support');\r\nvar CanvasRenderer = _dereq_('./renderers/canvas');\r\nvar ImageLoader = _dereq_('./imageloader');\r\nvar NodeParser = _dereq_('./nodeparser');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar log = _dereq_('./log');\r\nvar utils = _dereq_('./utils');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\nvar getBounds = utils.getBounds;\r\n\r\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\r\nvar html2canvasCloneIndex = 0;\r\n\r\nfunction html2canvas(nodeList, options) {\r\n    var index = html2canvasCloneIndex++;\r\n    options = options || {};\r\n    if (options.logging) {\r\n        log.options.logging = true;\r\n        log.options.start = Date.now();\r\n    }\r\n\r\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\r\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\r\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\r\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\r\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\r\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\r\n    options.strict = !!options.strict;\r\n\r\n    if (typeof(nodeList) === \"string\") {\r\n        if (typeof(options.proxy) !== \"string\") {\r\n            return Promise.reject(\"Proxy must be used when rendering url\");\r\n        }\r\n        var width = options.width != null ? options.width : window.innerWidth;\r\n        var height = options.height != null ? options.height : window.innerHeight;\r\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\r\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\r\n        });\r\n    }\r\n\r\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\r\n    node.setAttribute(html2canvasNodeAttribute + index, index);\r\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\r\n        if (typeof(options.onrendered) === \"function\") {\r\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\r\n            options.onrendered(canvas);\r\n        }\r\n        return canvas;\r\n    });\r\n}\r\n\r\nhtml2canvas.CanvasRenderer = CanvasRenderer;\r\nhtml2canvas.NodeContainer = NodeContainer;\r\nhtml2canvas.log = log;\r\nhtml2canvas.utils = utils;\r\n\r\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\r\n    return Promise.reject(\"No canvas support\");\r\n} : html2canvas;\r\n\r\nmodule.exports = html2canvasExport;\r\n\r\nif (typeof(define) === 'function' && define.amd) {\r\n    define('html2canvas', [], function() {\r\n        return html2canvasExport;\r\n    });\r\n}\r\n\r\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\r\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\r\n        log(\"Document cloned\");\r\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\r\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\r\n        document.querySelector(selector).removeAttribute(attributeName);\r\n        var clonedWindow = container.contentWindow;\r\n        var node = clonedWindow.document.querySelector(selector);\r\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\r\n        return oncloneHandler.then(function() {\r\n            return renderWindow(node, container, options, windowWidth, windowHeight);\r\n        });\r\n    });\r\n}\r\n\r\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\r\n    var clonedWindow = container.contentWindow;\r\n    var support = new Support(clonedWindow.document);\r\n    var imageLoader = new ImageLoader(options, support);\r\n    var bounds = getBounds(node);\r\n    var width = options.type === \"view\" ? windowWidth : bounds.right + 1;\r\n    var height = options.type === \"view\" ? windowHeight : bounds.bottom + 1;\r\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\r\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\r\n    return parser.ready.then(function() {\r\n        log(\"Finished rendering\");\r\n        var canvas;\r\n\r\n        if (options.type === \"view\") {\r\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\r\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\r\n            canvas = renderer.canvas;\r\n        } else if (options.scale) {\r\n            var origBounds = {width: options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0};\r\n            var cropBounds = {};\r\n            for (var key in origBounds) {\r\n                if (origBounds.hasOwnProperty(key)) { cropBounds[key] = origBounds[key] * options.scale; }\r\n            }\r\n            canvas = crop(renderer.canvas, cropBounds);\r\n            canvas.style.width = origBounds.width + 'px';\r\n            canvas.style.height = origBounds.height + 'px';\r\n        } else {\r\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\r\n        }\r\n\r\n        cleanupContainer(container, options);\r\n        return canvas;\r\n    });\r\n}\r\n\r\nfunction cleanupContainer(container, options) {\r\n    if (options.removeContainer) {\r\n        container.parentNode.removeChild(container);\r\n        log(\"Cleaned up container\");\r\n    }\r\n}\r\n\r\nfunction crop(canvas, bounds) {\r\n    var croppedCanvas = document.createElement(\"canvas\");\r\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\r\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\r\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\r\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\r\n    croppedCanvas.width = bounds.width;\r\n    croppedCanvas.height =  bounds.height;\r\n    var width = x2-x1;\r\n    var height = y2-y1;\r\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\r\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\r\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\r\n    return croppedCanvas;\r\n}\r\n\r\nfunction documentWidth (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\r\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\r\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\r\n    );\r\n}\r\n\r\nfunction documentHeight (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\r\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\r\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\r\n    );\r\n}\r\n\r\nfunction absoluteUrl(url) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.href = link.href;\r\n    return link;\r\n}\r\n\r\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction DummyImageContainer(src) {\r\n    this.src = src;\r\n    log(\"DummyImageContainer for\", src);\r\n    if (!this.promise || !this.image) {\r\n        log(\"Initiating DummyImageContainer\");\r\n        DummyImageContainer.prototype.image = new Image();\r\n        var image = this.image;\r\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\r\n            image.onload = resolve;\r\n            image.onerror = reject;\r\n            image.src = smallImage();\r\n            if (image.complete === true) {\r\n                resolve(image);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = DummyImageContainer;\r\n\r\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction Font(family, size) {\r\n    var container = document.createElement('div'),\r\n        img = document.createElement('img'),\r\n        span = document.createElement('span'),\r\n        sampleText = 'Hidden Text',\r\n        baseline,\r\n        middle;\r\n\r\n    container.style.visibility = \"hidden\";\r\n    container.style.fontFamily = family;\r\n    container.style.fontSize = size;\r\n    container.style.margin = 0;\r\n    container.style.padding = 0;\r\n\r\n    document.body.appendChild(container);\r\n\r\n    img.src = smallImage();\r\n    img.width = 1;\r\n    img.height = 1;\r\n\r\n    img.style.margin = 0;\r\n    img.style.padding = 0;\r\n    img.style.verticalAlign = \"baseline\";\r\n\r\n    span.style.fontFamily = family;\r\n    span.style.fontSize = size;\r\n    span.style.margin = 0;\r\n    span.style.padding = 0;\r\n\r\n    span.appendChild(document.createTextNode(sampleText));\r\n    container.appendChild(span);\r\n    container.appendChild(img);\r\n    baseline = (img.offsetTop - span.offsetTop) + 1;\r\n\r\n    container.removeChild(span);\r\n    container.appendChild(document.createTextNode(sampleText));\r\n\r\n    container.style.lineHeight = \"normal\";\r\n    img.style.verticalAlign = \"super\";\r\n\r\n    middle = (img.offsetTop-container.offsetTop) + 1;\r\n\r\n    document.body.removeChild(container);\r\n\r\n    this.baseline = baseline;\r\n    this.lineWidth = 1;\r\n    this.middle = middle;\r\n}\r\n\r\nmodule.exports = Font;\r\n\r\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\r\nvar Font = _dereq_('./font');\r\n\r\nfunction FontMetrics() {\r\n    this.data = {};\r\n}\r\n\r\nFontMetrics.prototype.getMetrics = function(family, size) {\r\n    if (this.data[family + \"-\" + size] === undefined) {\r\n        this.data[family + \"-\" + size] = new Font(family, size);\r\n    }\r\n    return this.data[family + \"-\" + size];\r\n};\r\n\r\nmodule.exports = FontMetrics;\r\n\r\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\n\r\nfunction FrameContainer(container, sameOrigin, options) {\r\n    this.image = null;\r\n    this.src = container;\r\n    var self = this;\r\n    var bounds = getBounds(container);\r\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\r\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\r\n            container.contentWindow.onload = container.onload = function() {\r\n                resolve(container);\r\n            };\r\n        } else {\r\n            resolve(container);\r\n        }\r\n    })).then(function(container) {\r\n        var html2canvas = _dereq_('./core');\r\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\r\n    }).then(function(canvas) {\r\n        return self.image = canvas;\r\n    });\r\n}\r\n\r\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\r\n    var container = this.src;\r\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\r\n};\r\n\r\nmodule.exports = FrameContainer;\r\n\r\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\r\nfunction GradientContainer(imageData) {\r\n    this.src = imageData.value;\r\n    this.colorStops = [];\r\n    this.type = null;\r\n    this.x0 = 0.5;\r\n    this.y0 = 0.5;\r\n    this.x1 = 0.5;\r\n    this.y1 = 0.5;\r\n    this.promise = Promise.resolve(true);\r\n}\r\n\r\nGradientContainer.TYPES = {\r\n    LINEAR: 1,\r\n    RADIAL: 2\r\n};\r\n\r\n// TODO: support hsl[a], negative %/length values\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\r\n\r\nmodule.exports = GradientContainer;\r\n\r\n},{}],10:[function(_dereq_,module,exports){\r\nfunction ImageContainer(src, cors) {\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.tainted = null;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        if (cors) {\r\n            self.image.crossOrigin = \"anonymous\";\r\n        }\r\n        self.image.src = src;\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = ImageContainer;\r\n\r\n},{}],11:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar ImageContainer = _dereq_('./imagecontainer');\r\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\r\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\r\nvar FrameContainer = _dereq_('./framecontainer');\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\r\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\r\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\r\nvar bind = _dereq_('./utils').bind;\r\n\r\nfunction ImageLoader(options, support) {\r\n    this.link = null;\r\n    this.options = options;\r\n    this.support = support;\r\n    this.origin = this.getOrigin(window.location.href);\r\n}\r\n\r\nImageLoader.prototype.findImages = function(nodes) {\r\n    var images = [];\r\n    nodes.reduce(function(imageNodes, container) {\r\n        switch(container.node.nodeName) {\r\n        case \"IMG\":\r\n            return imageNodes.concat([{\r\n                args: [container.node.src],\r\n                method: \"url\"\r\n            }]);\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            return imageNodes.concat([{\r\n                args: [container.node],\r\n                method: container.node.nodeName\r\n            }]);\r\n        }\r\n        return imageNodes;\r\n    }, []).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.findBackgroundImage = function(images, container) {\r\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.addImage = function(images, callback) {\r\n    return function(newImage) {\r\n        newImage.args.forEach(function(image) {\r\n            if (!this.imageExists(images, image)) {\r\n                images.splice(0, 0, callback.call(this, newImage));\r\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\r\n            }\r\n        }, this);\r\n    };\r\n};\r\n\r\nImageLoader.prototype.hasImageBackground = function(imageData) {\r\n    return imageData.method !== \"none\";\r\n};\r\n\r\nImageLoader.prototype.loadImage = function(imageData) {\r\n    if (imageData.method === \"url\") {\r\n        var src = imageData.args[0];\r\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\r\n            return new SVGContainer(src);\r\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\r\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\r\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\r\n            return new ImageContainer(src, false);\r\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\r\n            return new ImageContainer(src, true);\r\n        } else if (this.options.proxy) {\r\n            return new ProxyImageContainer(src, this.options.proxy);\r\n        } else {\r\n            return new DummyImageContainer(src);\r\n        }\r\n    } else if (imageData.method === \"linear-gradient\") {\r\n        return new LinearGradientContainer(imageData);\r\n    } else if (imageData.method === \"gradient\") {\r\n        return new WebkitGradientContainer(imageData);\r\n    } else if (imageData.method === \"svg\") {\r\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\r\n    } else if (imageData.method === \"IFRAME\") {\r\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\r\n    } else {\r\n        return new DummyImageContainer(imageData);\r\n    }\r\n};\r\n\r\nImageLoader.prototype.isSVG = function(src) {\r\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\r\n};\r\n\r\nImageLoader.prototype.imageExists = function(images, src) {\r\n    return images.some(function(image) {\r\n        return image.src === src;\r\n    });\r\n};\r\n\r\nImageLoader.prototype.isSameOrigin = function(url) {\r\n    return (this.getOrigin(url) === this.origin);\r\n};\r\n\r\nImageLoader.prototype.getOrigin = function(url) {\r\n    var link = this.link || (this.link = document.createElement(\"a\"));\r\n    link.href = url;\r\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\r\n    return link.protocol + link.hostname + link.port;\r\n};\r\n\r\nImageLoader.prototype.getPromise = function(container) {\r\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\r\n        var dummy = new DummyImageContainer(container.src);\r\n        return dummy.promise.then(function(image) {\r\n            container.image = image;\r\n        });\r\n    });\r\n};\r\n\r\nImageLoader.prototype.get = function(src) {\r\n    var found = null;\r\n    return this.images.some(function(img) {\r\n        return (found = img).src === src;\r\n    }) ? found : null;\r\n};\r\n\r\nImageLoader.prototype.fetch = function(nodes) {\r\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\r\n    this.images.forEach(function(image, index) {\r\n        image.promise.then(function() {\r\n            log(\"Succesfully loaded image #\"+ (index+1), image);\r\n        }, function(e) {\r\n            log(\"Failed loading image #\"+ (index+1), image, e);\r\n        });\r\n    });\r\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\r\n    log(\"Finished searching images\");\r\n    return this;\r\n};\r\n\r\nImageLoader.prototype.timeout = function(container, timeout) {\r\n    var timer;\r\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\r\n        timer = setTimeout(function() {\r\n            log(\"Timed out loading image\", container);\r\n            reject(container);\r\n        }, timeout);\r\n    })]).then(function(container) {\r\n        clearTimeout(timer);\r\n        return container;\r\n    });\r\n    promise['catch'](function() {\r\n        clearTimeout(timer);\r\n    });\r\n    return promise;\r\n};\r\n\r\nmodule.exports = ImageLoader;\r\n\r\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\nvar Color = _dereq_('./color');\r\n\r\nfunction LinearGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = GradientContainer.TYPES.LINEAR;\r\n\r\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\r\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\r\n\r\n    if (hasDirection) {\r\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\r\n            switch(position) {\r\n            case \"left\":\r\n                this.x0 = 0;\r\n                this.x1 = 1;\r\n                break;\r\n            case \"top\":\r\n                this.y0 = 0;\r\n                this.y1 = 1;\r\n                break;\r\n            case \"right\":\r\n                this.x0 = 1;\r\n                this.x1 = 0;\r\n                break;\r\n            case \"bottom\":\r\n                this.y0 = 1;\r\n                this.y1 = 0;\r\n                break;\r\n            case \"to\":\r\n                var y0 = this.y0;\r\n                var x0 = this.x0;\r\n                this.y0 = this.y1;\r\n                this.x0 = this.x1;\r\n                this.x1 = x0;\r\n                this.y1 = y0;\r\n                break;\r\n            case \"center\":\r\n                break; // centered by default\r\n            // Firefox internally converts position keywords to percentages:\r\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\r\n            default: // percentage or absolute length\r\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\r\n                var ratio = parseFloat(position, 10) * 1e-2;\r\n                if (isNaN(ratio)) { // invalid or unhandled value\r\n                    break;\r\n                }\r\n                if (index === 0) {\r\n                    this.y0 = ratio;\r\n                    this.y1 = 1 - this.y0;\r\n                } else {\r\n                    this.x0 = ratio;\r\n                    this.x1 = 1 - this.x0;\r\n                }\r\n                break;\r\n            }\r\n        }, this);\r\n    } else {\r\n        this.y0 = 0;\r\n        this.y1 = 1;\r\n    }\r\n\r\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\r\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\r\n        var value = +colorStopMatch[2];\r\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\r\n        return {\r\n            color: new Color(colorStopMatch[1]),\r\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\r\n            stop: unit === \"%\" ? value / 100 : null\r\n        };\r\n    });\r\n\r\n    if (this.colorStops[0].stop === null) {\r\n        this.colorStops[0].stop = 0;\r\n    }\r\n\r\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\r\n        this.colorStops[this.colorStops.length - 1].stop = 1;\r\n    }\r\n\r\n    // calculates and fills-in explicit stop positions when omitted from rule\r\n    this.colorStops.forEach(function(colorStop, index) {\r\n        if (colorStop.stop === null) {\r\n            this.colorStops.slice(index).some(function(find, count) {\r\n                if (find.stop !== null) {\r\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }, this);\r\n        }\r\n    }, this);\r\n}\r\n\r\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\r\n\r\nmodule.exports = LinearGradientContainer;\r\n\r\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\r\nvar logger = function() {\r\n    if (logger.options.logging && window.console && window.console.log) {\r\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\r\n    }\r\n};\r\n\r\nlogger.options = {logging: false};\r\nmodule.exports = logger;\r\n\r\n},{}],14:[function(_dereq_,module,exports){\r\nvar Color = _dereq_('./color');\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeContainer(node, parent) {\r\n    this.node = node;\r\n    this.parent = parent;\r\n    this.stack = null;\r\n    this.bounds = null;\r\n    this.borders = null;\r\n    this.clip = [];\r\n    this.backgroundClip = [];\r\n    this.offsetBounds = null;\r\n    this.visible = null;\r\n    this.computedStyles = null;\r\n    this.colors = {};\r\n    this.styles = {};\r\n    this.backgroundImages = null;\r\n    this.transformData = null;\r\n    this.transformMatrix = null;\r\n    this.isPseudoElement = false;\r\n    this.opacity = null;\r\n}\r\n\r\nNodeContainer.prototype.cloneTo = function(stack) {\r\n    stack.visible = this.visible;\r\n    stack.borders = this.borders;\r\n    stack.bounds = this.bounds;\r\n    stack.clip = this.clip;\r\n    stack.backgroundClip = this.backgroundClip;\r\n    stack.computedStyles = this.computedStyles;\r\n    stack.styles = this.styles;\r\n    stack.backgroundImages = this.backgroundImages;\r\n    stack.opacity = this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.getOpacity = function() {\r\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.assignStack = function(stack) {\r\n    this.stack = stack;\r\n    stack.children.push(this);\r\n};\r\n\r\nNodeContainer.prototype.isElementVisible = function() {\r\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\r\n        this.css('display') !== \"none\" &&\r\n        this.css('visibility') !== \"hidden\" &&\r\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\r\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\r\n    );\r\n};\r\n\r\nNodeContainer.prototype.css = function(attribute) {\r\n    if (!this.computedStyles) {\r\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\r\n    }\r\n\r\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\r\n};\r\n\r\nNodeContainer.prototype.prefixedCss = function(attribute) {\r\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n    var value = this.css(attribute);\r\n    if (value === undefined) {\r\n        prefixes.some(function(prefix) {\r\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\r\n            return value !== undefined;\r\n        }, this);\r\n    }\r\n    return value === undefined ? null : value;\r\n};\r\n\r\nNodeContainer.prototype.computedStyle = function(type) {\r\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\r\n};\r\n\r\nNodeContainer.prototype.cssInt = function(attribute) {\r\n    var value = parseInt(this.css(attribute), 10);\r\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\r\n};\r\n\r\nNodeContainer.prototype.color = function(attribute) {\r\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\r\n};\r\n\r\nNodeContainer.prototype.cssFloat = function(attribute) {\r\n    var value = parseFloat(this.css(attribute));\r\n    return (isNaN(value)) ? 0 : value;\r\n};\r\n\r\nNodeContainer.prototype.fontWeight = function() {\r\n    var weight = this.css(\"fontWeight\");\r\n    switch(parseInt(weight, 10)){\r\n    case 401:\r\n        weight = \"bold\";\r\n        break;\r\n    case 400:\r\n        weight = \"normal\";\r\n        break;\r\n    }\r\n    return weight;\r\n};\r\n\r\nNodeContainer.prototype.parseClip = function() {\r\n    var matches = this.css('clip').match(this.CLIP);\r\n    if (matches) {\r\n        return {\r\n            top: parseInt(matches[1], 10),\r\n            right: parseInt(matches[2], 10),\r\n            bottom: parseInt(matches[3], 10),\r\n            left: parseInt(matches[4], 10)\r\n        };\r\n    }\r\n    return null;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundImages = function() {\r\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\r\n};\r\n\r\nNodeContainer.prototype.cssList = function(property, index) {\r\n    var value = (this.css(property) || '').split(',');\r\n    value = value[index || 0] || value[0] || 'auto';\r\n    value = value.trim().split(' ');\r\n    if (value.length === 1) {\r\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\r\n    }\r\n    return value;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\r\n    var size = this.cssList(\"backgroundSize\", index);\r\n    var width, height;\r\n\r\n    if (isPercentage(size[0])) {\r\n        width = bounds.width * parseFloat(size[0]) / 100;\r\n    } else if (/contain|cover/.test(size[0])) {\r\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\r\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\r\n    } else {\r\n        width = parseInt(size[0], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto' && size[1] === 'auto') {\r\n        height = image.height;\r\n    } else if (size[1] === 'auto') {\r\n        height = width / image.width * image.height;\r\n    } else if (isPercentage(size[1])) {\r\n        height =  bounds.height * parseFloat(size[1]) / 100;\r\n    } else {\r\n        height = parseInt(size[1], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto') {\r\n        width = height / image.height * image.width;\r\n    }\r\n\r\n    return {width: width, height: height};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\r\n    var position = this.cssList('backgroundPosition', index);\r\n    var left, top;\r\n\r\n    if (isPercentage(position[0])){\r\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\r\n    } else {\r\n        left = parseInt(position[0], 10);\r\n    }\r\n\r\n    if (position[1] === 'auto') {\r\n        top = left / image.width * image.height;\r\n    } else if (isPercentage(position[1])){\r\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\r\n    } else {\r\n        top = parseInt(position[1], 10);\r\n    }\r\n\r\n    if (position[0] === 'auto') {\r\n        left = top / image.height * image.width;\r\n    }\r\n\r\n    return {left: left, top: top};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\r\n    return this.cssList(\"backgroundRepeat\", index)[0];\r\n};\r\n\r\nNodeContainer.prototype.parseTextShadows = function() {\r\n    var textShadow = this.css(\"textShadow\");\r\n    var results = [];\r\n\r\n    if (textShadow && textShadow !== 'none') {\r\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\r\n        for (var i = 0; shadows && (i < shadows.length); i++) {\r\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\r\n            results.push({\r\n                color: new Color(s[0]),\r\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\r\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\r\n                blur: s[3] ? s[3].replace('px', '') : 0\r\n            });\r\n        }\r\n    }\r\n    return results;\r\n};\r\n\r\nNodeContainer.prototype.parseTransform = function() {\r\n    if (!this.transformData) {\r\n        if (this.hasTransform()) {\r\n            var offset = this.parseBounds();\r\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\r\n            origin[0] += offset.left;\r\n            origin[1] += offset.top;\r\n            this.transformData = {\r\n                origin: origin,\r\n                matrix: this.parseTransformMatrix()\r\n            };\r\n        } else {\r\n            this.transformData = {\r\n                origin: [0, 0],\r\n                matrix: [1, 0, 0, 1, 0, 0]\r\n            };\r\n        }\r\n    }\r\n    return this.transformData;\r\n};\r\n\r\nNodeContainer.prototype.parseTransformMatrix = function() {\r\n    if (!this.transformMatrix) {\r\n        var transform = this.prefixedCss(\"transform\");\r\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\r\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\r\n    }\r\n    return this.transformMatrix;\r\n};\r\n\r\nNodeContainer.prototype.inverseTransform = function() {\r\n    var transformData = this.parseTransform();\r\n    return { origin: transformData.origin, matrix: matrixInverse(transformData.matrix) };\r\n};\r\n\r\nNodeContainer.prototype.parseBounds = function() {\r\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\r\n};\r\n\r\nNodeContainer.prototype.hasTransform = function() {\r\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\r\n};\r\n\r\nNodeContainer.prototype.getValue = function() {\r\n    var value = this.node.value || \"\";\r\n    if (this.node.tagName === \"SELECT\") {\r\n        value = selectionValue(this.node);\r\n    } else if (this.node.type === \"password\") {\r\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\r\n    }\r\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\r\n};\r\n\r\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\r\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\r\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\r\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\r\n\r\nfunction selectionValue(node) {\r\n    var option = node.options[node.selectedIndex || 0];\r\n    return option ? (option.text || \"\") : \"\";\r\n}\r\n\r\nfunction parseMatrix(match) {\r\n    if (match && match[1] === \"matrix\") {\r\n        return match[2].split(\",\").map(function(s) {\r\n            return parseFloat(s.trim());\r\n        });\r\n    } else if (match && match[1] === \"matrix3d\") {\r\n        var matrix3d = match[2].split(\",\").map(function(s) {\r\n            return parseFloat(s.trim());\r\n        });\r\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\r\n    }\r\n}\r\n\r\nfunction matrixInverse(m) {\r\n    // This is programmed specifically for transform matrices, which have a fixed structure.\r\n    var a = m[0], b = m[2], c = m[4], d = m[1], e = m[3], f = m[5];\r\n    var det = a*e - b*d;\r\n    var M = [e, -d, -b, a, b*f-c*e, c*d-a*f].map(function(val) { return val/det; });\r\n    return M;\r\n}\r\n\r\nfunction isPercentage(value) {\r\n    return value.toString().indexOf(\"%\") !== -1;\r\n}\r\n\r\nfunction removePx(str) {\r\n    return str.replace(\"px\", \"\");\r\n}\r\n\r\nfunction asFloat(str) {\r\n    return parseFloat(str);\r\n}\r\n\r\nmodule.exports = NodeContainer;\r\n\r\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar punycode = _dereq_('punycode');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar TextContainer = _dereq_('./textcontainer');\r\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\r\nvar FontMetrics = _dereq_('./fontmetrics');\r\nvar Color = _dereq_('./color');\r\nvar StackingContext = _dereq_('./stackingcontext');\r\nvar utils = _dereq_('./utils');\r\nvar bind = utils.bind;\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeParser(element, renderer, support, imageLoader, options) {\r\n    log(\"Starting NodeParser\");\r\n    this.renderer = renderer;\r\n    this.options = options;\r\n    this.range = null;\r\n    this.support = support;\r\n    this.renderQueue = [];\r\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\r\n    var parent = new NodeContainer(element, null);\r\n    if (options.background) {\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\r\n    }\r\n    if (element === element.ownerDocument.documentElement) {\r\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\r\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\r\n    }\r\n    parent.visibile = parent.isElementVisible();\r\n    this.createPseudoHideStyles(element.ownerDocument);\r\n    this.disableAnimations(element.ownerDocument);\r\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\r\n        return container.visible = container.isElementVisible();\r\n    }).map(this.getPseudoElements, this));\r\n    this.fontMetrics = new FontMetrics();\r\n    log(\"Fetched nodes, total:\", this.nodes.length);\r\n    log(\"Calculate overflow clips\");\r\n    this.calculateOverflowClips();\r\n    log(\"Start fetching images\");\r\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\r\n    this.ready = this.images.ready.then(bind(function() {\r\n        log(\"Images loaded, starting parsing\");\r\n        log(\"Creating stacking contexts\");\r\n        this.createStackingContexts();\r\n        log(\"Sorting stacking contexts\");\r\n        this.sortStackingContexts(this.stack);\r\n        this.parse(this.stack);\r\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\r\n        return new Promise(bind(function(resolve) {\r\n            if (!options.async) {\r\n                this.renderQueue.forEach(this.paint, this);\r\n                resolve();\r\n            } else if (typeof(options.async) === \"function\") {\r\n                options.async.call(this, this.renderQueue, resolve);\r\n            } else if (this.renderQueue.length > 0){\r\n                this.renderIndex = 0;\r\n                this.asyncRenderer(this.renderQueue, resolve);\r\n            } else {\r\n                resolve();\r\n            }\r\n        }, this));\r\n    }, this));\r\n}\r\n\r\nNodeParser.prototype.calculateOverflowClips = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container)) {\r\n            if (isPseudoElement(container)) {\r\n                container.appendToDOM();\r\n            }\r\n            container.borders = this.parseBorders(container);\r\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\r\n            var cssClip = container.parseClip();\r\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\r\n                clip.push([[\"rect\",\r\n                        container.bounds.left + cssClip.left,\r\n                        container.bounds.top + cssClip.top,\r\n                        cssClip.right - cssClip.left,\r\n                        cssClip.bottom - cssClip.top\r\n                ]]);\r\n            }\r\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\r\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\r\n            if (isPseudoElement(container)) {\r\n                container.cleanDOM();\r\n            }\r\n        } else if (isTextNode(container)) {\r\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\r\n        }\r\n        if (!isPseudoElement(container)) {\r\n            container.bounds = null;\r\n        }\r\n    }, this);\r\n};\r\n\r\nfunction hasParentClip(container) {\r\n    return container.parent && container.parent.clip.length;\r\n}\r\n\r\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\r\n    asyncTimer = asyncTimer || Date.now();\r\n    this.paint(queue[this.renderIndex++]);\r\n    if (queue.length === this.renderIndex) {\r\n        resolve();\r\n    } else if (asyncTimer + 20 > Date.now()) {\r\n        this.asyncRenderer(queue, resolve, asyncTimer);\r\n    } else {\r\n        setTimeout(bind(function() {\r\n            this.asyncRenderer(queue, resolve);\r\n        }, this), 0);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.createPseudoHideStyles = function(document) {\r\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\r\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\r\n};\r\n\r\nNodeParser.prototype.disableAnimations = function(document) {\r\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\r\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\r\n};\r\n\r\nNodeParser.prototype.createStyles = function(document, styles) {\r\n    var hidePseudoElements = document.createElement('style');\r\n    hidePseudoElements.innerHTML = styles;\r\n    document.body.appendChild(hidePseudoElements);\r\n};\r\n\r\nNodeParser.prototype.getPseudoElements = function(container) {\r\n    var nodes = [[container]];\r\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\r\n        var before = this.getPseudoElement(container, \":before\");\r\n        var after = this.getPseudoElement(container, \":after\");\r\n\r\n        if (before) {\r\n            nodes.push(before);\r\n        }\r\n\r\n        if (after) {\r\n            nodes.push(after);\r\n        }\r\n    }\r\n    return flatten(nodes);\r\n};\r\n\r\nfunction toCamelCase(str) {\r\n    return str.replace(/(\\-[a-z])/g, function(match){\r\n        return match.toUpperCase().replace('-','');\r\n    });\r\n}\r\n\r\nNodeParser.prototype.getPseudoElement = function(container, type) {\r\n    var style = container.computedStyle(type);\r\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\r\n        return null;\r\n    }\r\n\r\n    var content = stripQuotes(style.content);\r\n    var isImage = content.substr(0, 3) === 'url';\r\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\r\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\r\n\r\n    for (var i = style.length-1; i >= 0; i--) {\r\n        var property = toCamelCase(style.item(i));\r\n        pseudoNode.style[property] = style[property];\r\n    }\r\n\r\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\r\n\r\n    if (isImage) {\r\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\r\n        return [pseudoContainer];\r\n    } else {\r\n        var text = document.createTextNode(content);\r\n        pseudoNode.appendChild(text);\r\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\r\n    }\r\n};\r\n\r\n\r\nNodeParser.prototype.getChildren = function(parentContainer) {\r\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\r\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\r\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\r\n    }, this));\r\n};\r\n\r\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\r\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\r\n    container.cloneTo(stack);\r\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\r\n    parentStack.contexts.push(stack);\r\n    container.stack = stack;\r\n};\r\n\r\nNodeParser.prototype.createStackingContexts = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\r\n            this.newStackingContext(container, true);\r\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\r\n            this.newStackingContext(container, false);\r\n        } else {\r\n            container.assignStack(container.parent.stack);\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\r\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\r\n};\r\n\r\nNodeParser.prototype.isRootElement = function(container) {\r\n    return container.parent === null;\r\n};\r\n\r\nNodeParser.prototype.sortStackingContexts = function(stack) {\r\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\r\n    stack.contexts.forEach(this.sortStackingContexts, this);\r\n};\r\n\r\nNodeParser.prototype.parseTextBounds = function(container) {\r\n    return function(text, index, textList) {\r\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\r\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\r\n                var offset = textList.slice(0, index).join(\"\").length;\r\n                return this.getRangeBounds(container.node, offset, text.length);\r\n            } else if (container.node && typeof(container.node.data) === \"string\") {\r\n                var replacementNode = container.node.splitText(text.length);\r\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\r\n                container.node = replacementNode;\r\n                return bounds;\r\n            }\r\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\r\n            container.node = container.node.splitText(text.length);\r\n        }\r\n        return {};\r\n    };\r\n};\r\n\r\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\r\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\r\n    var parent = node.parentNode,\r\n        backupText = node.cloneNode(true);\r\n\r\n    wrapper.appendChild(node.cloneNode(true));\r\n    parent.replaceChild(wrapper, node);\r\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\r\n    parent.replaceChild(backupText, wrapper);\r\n    return bounds;\r\n};\r\n\r\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\r\n    var range = this.range || (this.range = node.ownerDocument.createRange());\r\n    range.setStart(node, offset);\r\n    range.setEnd(node, offset + length);\r\n    return range.getBoundingClientRect();\r\n};\r\n\r\nfunction ClearTransform() {}\r\n\r\nNodeParser.prototype.parse = function(stack) {\r\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\r\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\r\n    var descendantElements = stack.children.filter(isElement);\r\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\r\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\r\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\r\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\r\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\r\n    var text = stack.children.filter(isTextNode).filter(hasText);\r\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\r\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\r\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\r\n            this.renderQueue.push(container);\r\n            if (isStackingContext(container)) {\r\n                this.parse(container);\r\n                this.renderQueue.push(new ClearTransform());\r\n            }\r\n        }, this);\r\n};\r\n\r\nNodeParser.prototype.paint = function(container) {\r\n    try {\r\n        if (container instanceof ClearTransform) {\r\n            this.renderer.ctx.restore();\r\n        } else if (isTextNode(container)) {\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.appendToDOM();\r\n            }\r\n            this.paintText(container);\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.cleanDOM();\r\n            }\r\n        } else {\r\n            this.paintNode(container);\r\n        }\r\n    } catch(e) {\r\n        log(e);\r\n        if (this.options.strict) {\r\n            throw e;\r\n        }\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintNode = function(container) {\r\n    if (isStackingContext(container)) {\r\n        this.renderer.setOpacity(container.opacity);\r\n        this.renderer.ctx.save();\r\n        if (container.hasTransform()) {\r\n            this.renderer.setTransform(container.parseTransform());\r\n        }\r\n    }\r\n\r\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\r\n        this.paintCheckbox(container);\r\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\r\n        this.paintRadio(container);\r\n    } else {\r\n        this.paintElement(container);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintElement = function(container) {\r\n    var bounds = container.parseBounds();\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\r\n    }, this, container);\r\n\r\n    this.renderer.mask(container.backgroundClip, function() {\r\n        this.renderer.renderShadows(container, container.borders.clip);\r\n    }, this, container);\r\n\r\n    this.renderer.clip(container.clip, function() {\r\n        this.renderer.renderBorders(container.borders.borders);\r\n    }, this, container);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        switch (container.node.nodeName) {\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            var imgContainer = this.images.get(container.node);\r\n            if (imgContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\r\n            } else {\r\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\r\n            }\r\n            break;\r\n        case \"IMG\":\r\n            var imageContainer = this.images.get(container.node.src);\r\n            if (imageContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\r\n            } else {\r\n                log(\"Error loading <img>\", container.node.src);\r\n            }\r\n            break;\r\n        case \"CANVAS\":\r\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\r\n            break;\r\n        case \"SELECT\":\r\n        case \"INPUT\":\r\n        case \"TEXTAREA\":\r\n            this.paintFormValue(container);\r\n            break;\r\n        }\r\n    }, this, container);\r\n};\r\n\r\nNodeParser.prototype.paintCheckbox = function(container) {\r\n    var b = container.parseBounds();\r\n\r\n    var size = Math.min(b.width, b.height);\r\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\r\n    var r = [3, 3];\r\n    var radius = [r, r, r, r];\r\n    var borders = [1,1,1,1].map(function(w) {\r\n        return {color: new Color('#A5A5A5'), width: w};\r\n    });\r\n\r\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\r\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\r\n        if (container.node.checked) {\r\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\r\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\r\n        }\r\n    }, this, container);\r\n};\r\n\r\nNodeParser.prototype.paintRadio = function(container) {\r\n    var bounds = container.parseBounds();\r\n\r\n    var size = Math.min(bounds.width, bounds.height) - 2;\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\r\n        if (container.node.checked) {\r\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\r\n        }\r\n    }, this, container);\r\n};\r\n\r\nNodeParser.prototype.paintFormValue = function(container) {\r\n    var value = container.getValue();\r\n    if (value.length > 0) {\r\n        var document = container.node.ownerDocument;\r\n        var wrapper = document.createElement('html2canvaswrapper');\r\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\r\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\r\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\r\n            'boxSizing', 'whiteSpace', 'wordWrap'];\r\n\r\n        properties.forEach(function(property) {\r\n            try {\r\n                wrapper.style[property] = container.css(property);\r\n            } catch(e) {\r\n                // Older IE has issues with \"border\"\r\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\r\n            }\r\n        });\r\n        var bounds = container.parseBounds();\r\n        wrapper.style.position = \"fixed\";\r\n        wrapper.style.left = bounds.left + \"px\";\r\n        wrapper.style.top = bounds.top + \"px\";\r\n        wrapper.textContent = value;\r\n        document.body.appendChild(wrapper);\r\n        this.paintText(new TextContainer(wrapper.firstChild, container));\r\n        document.body.removeChild(wrapper);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintText = function(container) {\r\n    container.applyTextTransform();\r\n    var characters = punycode.ucs2.decode(container.node.data);\r\n    var wordRendering = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data);\r\n    var textList = wordRendering ? getWords(characters) : characters.map(function(character) {\r\n        return punycode.ucs2.encode([character]);\r\n    });\r\n    if (!wordRendering) {\r\n        container.parent.node.style.fontVariantLigatures = 'none';\r\n    }\r\n\r\n    var weight = container.parent.fontWeight();\r\n    var size = container.parent.css('fontSize');\r\n    var family = container.parent.css('fontFamily');\r\n    var shadows = container.parent.parseTextShadows();\r\n\r\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\r\n    if (shadows.length) {\r\n        // TODO: support multiple text shadows\r\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\r\n    } else {\r\n        this.renderer.clearShadow();\r\n    }\r\n\r\n    this.renderer.clip(container.parent.clip, function() {\r\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\r\n            if (bounds) {\r\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\r\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\r\n            }\r\n        }, this);\r\n    }, this, container.parent);\r\n};\r\n\r\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\r\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\r\n    case \"underline\":\r\n        // Draws a line at the baseline of the font\r\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"overline\":\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"line-through\":\r\n        // TODO try and find exact position for line-through\r\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    }\r\n};\r\n\r\nvar borderColorTransforms = {\r\n    inset: [\r\n        [\"darken\", 0.60],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.60]\r\n    ]\r\n};\r\n\r\nNodeParser.prototype.parseBorders = function(container) {\r\n    var nodeBounds = container.parseBounds();\r\n    var radius = getBorderRadiusData(container);\r\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\r\n        var style = container.css('border' + side + 'Style');\r\n        var color = container.color('border' + side + 'Color');\r\n        if (style === \"inset\" && color.isBlack()) {\r\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\r\n        }\r\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\r\n        return {\r\n            width: container.cssInt('border' + side + 'Width'),\r\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\r\n            style: style,\r\n            pathArgs: null,\r\n            args: null\r\n        };\r\n    });\r\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\r\n\r\n    return {\r\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\r\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\r\n    };\r\n};\r\n\r\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\r\n    var pathBounds = {\r\n        top: nodeBounds.top + borders[0].width/2,\r\n        right: nodeBounds.right - borders[1].width/2,\r\n        bottom: nodeBounds.bottom - borders[2].width/2,\r\n        left: nodeBounds.left + borders[3].width/2\r\n    };\r\n    return borders.map(function(border, borderSide) {\r\n        if (border.width > 0) {\r\n            var bx = nodeBounds.left;\r\n            var by = nodeBounds.top;\r\n            var bw = nodeBounds.width;\r\n            var bh = nodeBounds.height - (borders[2].width);\r\n\r\n            switch(borderSide) {\r\n            case 0:\r\n                // top border\r\n                bh = borders[0].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by],\r\n                        c2: [bx + bw, by],\r\n                        c3: [bx + bw - borders[1].width, by + bh],\r\n                        c4: [bx + borders[3].width, by + bh]\r\n                    }, radius[0], radius[1],\r\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\r\n                border.pathArgs = drawSidePath({\r\n                        c1: [pathBounds.left, pathBounds.top],\r\n                        c2: [pathBounds.right, pathBounds.top]\r\n                    }, radius[0], radius[1],\r\n                    borderPoints.topLeft, borderPoints.topRight);\r\n                break;\r\n            case 1:\r\n                // right border\r\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\r\n                bw = borders[1].width;\r\n\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by],\r\n                        c2: [bx + bw, by + bh + borders[2].width],\r\n                        c3: [bx, by + bh],\r\n                        c4: [bx, by + borders[0].width]\r\n                    }, radius[1], radius[2],\r\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\r\n                border.pathArgs = drawSidePath({\r\n                        c1: [pathBounds.right, pathBounds.top],\r\n                        c2: [pathBounds.right, pathBounds.bottom]\r\n                    }, radius[1], radius[2],\r\n                    borderPoints.topRight, borderPoints.bottomRight);\r\n                break;\r\n            case 2:\r\n                // bottom border\r\n                by = (by + nodeBounds.height) - (borders[2].width);\r\n                bh = borders[2].width;\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by + bh],\r\n                        c2: [bx, by + bh],\r\n                        c3: [bx + borders[3].width, by],\r\n                        c4: [bx + bw - borders[3].width, by]\r\n                    }, radius[2], radius[3],\r\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\r\n                border.pathArgs = drawSidePath({\r\n                        c1: [pathBounds.right, pathBounds.bottom],\r\n                        c2: [pathBounds.left, pathBounds.bottom]\r\n                    }, radius[2], radius[3],\r\n                    borderPoints.bottomRight, borderPoints.bottomLeft);\r\n                break;\r\n            case 3:\r\n                // left border\r\n                bw = borders[3].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by + bh + borders[2].width],\r\n                        c2: [bx, by],\r\n                        c3: [bx + bw, by + borders[0].width],\r\n                        c4: [bx + bw, by + bh]\r\n                    }, radius[3], radius[0],\r\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\r\n                border.pathArgs = drawSidePath({\r\n                        c1: [pathBounds.left, pathBounds.bottom],\r\n                        c2: [pathBounds.left, pathBounds.top]\r\n                    }, radius[3], radius[0],\r\n                    borderPoints.bottomLeft, borderPoints.topLeft);\r\n                break;\r\n            }\r\n        }\r\n        return border;\r\n    });\r\n}\r\n\r\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\r\n    var backgroundClip = container.css('backgroundClip'),\r\n        borderArgs = [];\r\n\r\n    switch(backgroundClip) {\r\n    case \"content-box\":\r\n    case \"padding-box\":\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\r\n        break;\r\n\r\n    default:\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\r\n        break;\r\n    }\r\n\r\n    return borderArgs;\r\n};\r\n\r\nfunction getCurvePoints(x, y, r1, r2) {\r\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\r\n    var ox = (r1) * kappa, // control point offset horizontal\r\n        oy = (r2) * kappa, // control point offset vertical\r\n        xm = x + r1, // x-middle\r\n        ym = y + r2; // y-middle\r\n    return {\r\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\r\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\r\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\r\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\r\n    };\r\n}\r\n\r\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\r\n    var x = bounds.left,\r\n        y = bounds.top,\r\n        width = bounds.width,\r\n        height = bounds.height,\r\n\r\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\r\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\r\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\r\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\r\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\r\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\r\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\r\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\r\n\r\n    var topWidth = width - trh,\r\n        rightHeight = height - brv,\r\n        bottomWidth = width - brh,\r\n        leftHeight = height - blv;\r\n\r\n    return {\r\n        topLeft: getCurvePoints(x + borders[3].width/2, y + borders[0].width/2, Math.max(0, tlh - borders[3].width/2), Math.max(0, tlv - borders[0].width/2)).topLeft.subdivide(0.5),\r\n        topRight: getCurvePoints(x + Math.min(topWidth, width + borders[3].width/2), y + borders[0].width/2, (topWidth > width + borders[3].width/2) ? 0 :trh - borders[3].width/2, trv - borders[0].width/2).topRight.subdivide(0.5),\r\n        bottomRight: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width/2), y + Math.min(rightHeight, height + borders[0].width/2), Math.max(0, brh - borders[1].width/2),  brv - borders[2].width/2).bottomRight.subdivide(0.5),\r\n        bottomLeft: getCurvePoints(x + borders[3].width/2, y + leftHeight, Math.max(0, blh - borders[3].width/2), blv - borders[2].width/2).bottomLeft.subdivide(0.5),\r\n\r\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\r\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\r\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\r\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\r\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\r\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\r\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\r\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\r\n    };\r\n}\r\n\r\nfunction bezierCurve(start, startControl, endControl, end) {\r\n    var lerp = function (a, b, t) {\r\n        return {\r\n            x: a.x + (b.x - a.x) * t,\r\n            y: a.y + (b.y - a.y) * t\r\n        };\r\n    };\r\n\r\n    return {\r\n        start: start,\r\n        startControl: startControl,\r\n        endControl: endControl,\r\n        end: end,\r\n        subdivide: function(t) {\r\n            var ab = lerp(start, startControl, t),\r\n                bc = lerp(startControl, endControl, t),\r\n                cd = lerp(endControl, end, t),\r\n                abbc = lerp(ab, bc, t),\r\n                bccd = lerp(bc, cd, t),\r\n                dest = lerp(abbc, bccd, t);\r\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\r\n        },\r\n        curveTo: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\r\n        },\r\n        curveToReversed: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\r\n        }\r\n    };\r\n}\r\n\r\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\r\n    var borderArgs = [];\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\r\n        outer1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\r\n        outer2[0].curveTo(borderArgs);\r\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\r\n        inner2[0].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\r\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\r\n    }\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\r\n        inner1[1].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\r\n    }\r\n\r\n    return borderArgs;\r\n}\r\n\r\nfunction drawSidePath(borderData, radius1, radius2, curve1, curve2) {\r\n    var borderArgs = [];\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", curve1[1].start.x, curve1[1].start.y]);\r\n        curve1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\r\n    }\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", curve2[0].start.x, curve2[0].start.y]);\r\n        curve2[0].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([ \"line\", borderData.c2[0], borderData.c2[1]]);\r\n    }\r\n\r\n    return borderArgs;\r\n}\r\n\r\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\r\n        corner1[0].curveTo(borderArgs);\r\n        corner1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", x, y]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\r\n    }\r\n}\r\n\r\nfunction negativeZIndex(container) {\r\n    return container.cssInt(\"zIndex\") < 0;\r\n}\r\n\r\nfunction positiveZIndex(container) {\r\n    return container.cssInt(\"zIndex\") > 0;\r\n}\r\n\r\nfunction zIndex0(container) {\r\n    return container.cssInt(\"zIndex\") === 0;\r\n}\r\n\r\nfunction inlineLevel(container) {\r\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction isStackingContext(container) {\r\n    return (container instanceof StackingContext);\r\n}\r\n\r\nfunction hasText(container) {\r\n    return container.node.data.trim().length > 0;\r\n}\r\n\r\nfunction noLetterSpacing(container) {\r\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\r\n}\r\n\r\nfunction getBorderRadiusData(container) {\r\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\r\n        var value = container.css('border' + side + 'Radius');\r\n        var arr = value.split(\" \");\r\n        if (arr.length <= 1) {\r\n            arr[1] = arr[0];\r\n        }\r\n        return arr.map(asInt);\r\n    });\r\n}\r\n\r\nfunction renderableNode(node) {\r\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\r\n}\r\n\r\nfunction isPositionedForStacking(container) {\r\n    var position = container.css(\"position\");\r\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\r\n    return zIndex !== \"auto\";\r\n}\r\n\r\nfunction isPositioned(container) {\r\n    return container.css(\"position\") !== \"static\";\r\n}\r\n\r\nfunction isFloating(container) {\r\n    return container.css(\"float\") !== \"none\";\r\n}\r\n\r\nfunction isInlineBlock(container) {\r\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction not(callback) {\r\n    var context = this;\r\n    return function() {\r\n        return !callback.apply(context, arguments);\r\n    };\r\n}\r\n\r\nfunction isElement(container) {\r\n    return container.node.nodeType === Node.ELEMENT_NODE;\r\n}\r\n\r\nfunction isPseudoElement(container) {\r\n    return container.isPseudoElement === true;\r\n}\r\n\r\nfunction isTextNode(container) {\r\n    return container.node.nodeType === Node.TEXT_NODE;\r\n}\r\n\r\nfunction zIndexSort(contexts) {\r\n    return function(a, b) {\r\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\r\n    };\r\n}\r\n\r\nfunction hasOpacity(container) {\r\n    return container.getOpacity() < 1;\r\n}\r\n\r\nfunction asInt(value) {\r\n    return parseInt(value, 10);\r\n}\r\n\r\nfunction getWidth(border) {\r\n    return border.width;\r\n}\r\n\r\nfunction nonIgnoredElement(nodeContainer) {\r\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\r\n}\r\n\r\nfunction flatten(arrays) {\r\n    return [].concat.apply([], arrays);\r\n}\r\n\r\nfunction stripQuotes(content) {\r\n    var first = content.substr(0, 1);\r\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\r\n}\r\n\r\nfunction getWords(characters) {\r\n    var words = [], i = 0, onWordBoundary = false, word;\r\n    while(characters.length) {\r\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n            onWordBoundary =! onWordBoundary;\r\n            i = 0;\r\n        } else {\r\n            i++;\r\n        }\r\n\r\n        if (i >= characters.length) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n        }\r\n    }\r\n    return words;\r\n}\r\n\r\nfunction isWordBoundary(characterCode) {\r\n    return [\r\n        32, // <space>\r\n        13, // \\r\r\n        10, // \\n\r\n        9, // \\t\r\n        45 // -\r\n    ].indexOf(characterCode) !== -1;\r\n}\r\n\r\nfunction hasUnicode(string) {\r\n    return (/[^\\u0000-\\u00ff]/).test(string);\r\n}\r\n\r\nmodule.exports = NodeParser;\r\n\r\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar utils = _dereq_('./utils');\r\nvar log = _dereq_('./log');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar decode64 = utils.decode64;\r\n\r\nfunction Proxy(src, proxyUrl, document) {\r\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\r\n    if (!proxyUrl) {\r\n        return Promise.reject(\"No proxy configured\");\r\n    }\r\n    var callback = createCallback(supportsCORS);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n\r\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\r\n        return decode64(response.content);\r\n    }));\r\n}\r\nvar proxyCount = 0;\r\n\r\nfunction ProxyURL(src, proxyUrl, document) {\r\n    var supportsCORSImage = ('crossOrigin' in new Image());\r\n    var callback = createCallback(supportsCORSImage);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\r\n        return \"data:\" + response.type + \";base64,\" + response.content;\r\n    }));\r\n}\r\n\r\nfunction jsonp(document, url, callback) {\r\n    return new Promise(function(resolve, reject) {\r\n        var s = document.createElement(\"script\");\r\n        var cleanup = function() {\r\n            delete window.html2canvas.proxy[callback];\r\n            document.body.removeChild(s);\r\n        };\r\n        window.html2canvas.proxy[callback] = function(response) {\r\n            cleanup();\r\n            resolve(response);\r\n        };\r\n        s.src = url;\r\n        s.onerror = function(e) {\r\n            cleanup();\r\n            reject(e);\r\n        };\r\n        document.body.appendChild(s);\r\n    });\r\n}\r\n\r\nfunction createCallback(useCORS) {\r\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\r\n}\r\n\r\nfunction createProxyUrl(proxyUrl, src, callback) {\r\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\r\n}\r\n\r\nfunction documentFromHTML(src) {\r\n    return function(html) {\r\n        var parser = new DOMParser(), doc;\r\n        try {\r\n            doc = parser.parseFromString(html, \"text/html\");\r\n        } catch(e) {\r\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\r\n            doc = document.implementation.createHTMLDocument(\"\");\r\n            try {\r\n                doc.open();\r\n                doc.write(html);\r\n                doc.close();\r\n            } catch(ee) {\r\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\r\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\r\n            }\r\n        }\r\n\r\n        var b = doc.querySelector(\"base\");\r\n        if (!b || !b.href.host) {\r\n            var base = doc.createElement(\"base\");\r\n            base.href = src;\r\n            doc.head.insertBefore(base, doc.head.firstChild);\r\n        }\r\n\r\n        return doc;\r\n    };\r\n}\r\n\r\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\r\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\r\n        return createWindowClone(doc, document, width, height, options, 0, 0);\r\n    });\r\n}\r\n\r\nexports.Proxy = Proxy;\r\nexports.ProxyURL = ProxyURL;\r\nexports.loadUrlDocument = loadUrlDocument;\r\n\r\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\r\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\r\n\r\nfunction ProxyImageContainer(src, proxy) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = src;\r\n    src = link.href;\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.crossOrigin = \"Anonymous\";\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n\r\n        new ProxyURL(src, proxy, document).then(function(url) {\r\n            self.image.src = url;\r\n        })['catch'](reject);\r\n    });\r\n}\r\n\r\nmodule.exports = ProxyImageContainer;\r\n\r\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction PseudoElementContainer(node, parent, type) {\r\n    NodeContainer.call(this, node, parent);\r\n    this.isPseudoElement = true;\r\n    this.before = type === \":before\";\r\n}\r\n\r\nPseudoElementContainer.prototype.cloneTo = function(stack) {\r\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\r\n    stack.isPseudoElement = true;\r\n    stack.before = this.before;\r\n};\r\n\r\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nPseudoElementContainer.prototype.appendToDOM = function() {\r\n    if (this.before) {\r\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\r\n    } else {\r\n        this.parent.node.appendChild(this.node);\r\n    }\r\n    this.parent.node.className += \" \" + this.getHideClass();\r\n};\r\n\r\nPseudoElementContainer.prototype.cleanDOM = function() {\r\n    this.node.parentNode.removeChild(this.node);\r\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\r\n};\r\n\r\nPseudoElementContainer.prototype.getHideClass = function() {\r\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\r\n};\r\n\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\r\n\r\nmodule.exports = PseudoElementContainer;\r\n\r\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction Renderer(width, height, images, options, document) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.images = images;\r\n    this.options = options;\r\n    this.document = document;\r\n}\r\n\r\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\r\n    var paddingLeft = container.cssInt('paddingLeft'),\r\n        paddingTop = container.cssInt('paddingTop'),\r\n        paddingRight = container.cssInt('paddingRight'),\r\n        paddingBottom = container.cssInt('paddingBottom'),\r\n        borders = borderData.borders;\r\n\r\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\r\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\r\n    this.drawImage(\r\n        imageContainer,\r\n        0,\r\n        0,\r\n        imageContainer.image.width || width,\r\n        imageContainer.image.height || height,\r\n        bounds.left + paddingLeft + borders[3].width,\r\n        bounds.top + paddingTop + borders[0].width,\r\n        width,\r\n        height\r\n    );\r\n};\r\n\r\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\r\n    if (bounds.height > 0 && bounds.width > 0) {\r\n        this.renderBackgroundColor(container, bounds);\r\n        this.renderBackgroundImage(container, bounds, borderData);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\r\n    var color = container.color(\"backgroundColor\");\r\n    if (!color.isTransparent()) {\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderShadows = function(container, shape) {\r\n    var boxShadow = container.css('boxShadow');\r\n    if (boxShadow !== 'none') {\r\n        var shadows = boxShadow.split(/,(?![^(]*\\))/);\r\n        this.shadow(shape, shadows);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBorders = function(borders) {\r\n    borders.forEach(this.renderBorder, this);\r\n};\r\n\r\nRenderer.prototype.renderBorder = function(data) {\r\n    if (!data.color.isTransparent() && data.args !== null) {\r\n        if (data.style === 'dashed' || data.style === 'dotted') {\r\n            var dash = (data.style === 'dashed') ? 3 : data.width;\r\n            this.ctx.setLineDash([dash]);\r\n            this.path(data.pathArgs);\r\n            this.ctx.strokeStyle = data.color;\r\n            this.ctx.lineWidth = data.width;\r\n            this.ctx.stroke();\r\n        } else {\r\n            this.drawShape(data.args, data.color);\r\n        }\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\r\n    var backgroundImages = container.parseBackgroundImages();\r\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\r\n        switch(backgroundImage.method) {\r\n        case \"url\":\r\n            var image = this.images.get(backgroundImage.args[0]);\r\n            if (image) {\r\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"linear-gradient\":\r\n        case \"gradient\":\r\n            var gradientImage = this.images.get(backgroundImage.value);\r\n            if (gradientImage) {\r\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"none\":\r\n            break;\r\n        default:\r\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\r\n        }\r\n    }, this);\r\n};\r\n\r\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\r\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\r\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\r\n    var repeat = container.parseBackgroundRepeat(index);\r\n    switch (repeat) {\r\n    case \"repeat-x\":\r\n    case \"repeat no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\r\n        break;\r\n    case \"repeat-y\":\r\n    case \"no-repeat repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\r\n        break;\r\n    case \"no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\r\n        break;\r\n    default:\r\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\r\n        break;\r\n    }\r\n};\r\n\r\nmodule.exports = Renderer;\r\n\r\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\r\nvar Renderer = _dereq_('../renderer');\r\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\r\nvar log = _dereq_('../log');\r\n\r\nfunction CanvasRenderer(width, height) {\r\n    Renderer.apply(this, arguments);\r\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    if (!this.options.canvas) {\r\n        if (this.options.dpi) {\r\n            this.options.scale = this.options.dpi / 96;   // 1 CSS inch = 96px.\r\n        }\r\n        if (this.options.scale) {\r\n            this.canvas.style.width = width + 'px';\r\n            this.canvas.style.height = height + 'px';\r\n            this.canvas.width = Math.floor(width * this.options.scale);\r\n            this.canvas.height = Math.floor(height * this.options.scale);\r\n            this.ctx.scale(this.options.scale, this.options.scale);\r\n        } else {\r\n            this.canvas.width = width;\r\n            this.canvas.height = height;\r\n        }\r\n    }\r\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\r\n    this.ctx.textBaseline = \"bottom\";\r\n    this.variables = {};\r\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\r\n}\r\n\r\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\r\n\r\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\r\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\r\n    this.setFillStyle(color).fillRect(left, top, width, height);\r\n};\r\n\r\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\r\n    this.setFillStyle(color);\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\r\n    this.ctx.closePath();\r\n    this.ctx.fill();\r\n};\r\n\r\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\r\n    this.circle(left, top, size, color);\r\n    this.ctx.strokeStyle = strokeColor.toString();\r\n    this.ctx.stroke();\r\n};\r\n\r\nCanvasRenderer.prototype.shadow = function(shape, shadows) {\r\n    var parseShadow = function(str) {\r\n        var propertyFilters = { color: /^(#|rgb|hsl|(?!(inset|initial|inherit))\\D+)/i, inset: /^inset/i, px: /px$/i };\r\n        var pxPropertyNames = [ 'x', 'y', 'blur', 'spread' ];\r\n        var properties = str.split(/ (?![^(]*\\))/);\r\n        var info = {};\r\n        for (var key in propertyFilters) {\r\n            info[key] = properties.filter(propertyFilters[key].test.bind(propertyFilters[key]));\r\n            info[key] = info[key].length === 0 ? null : info[key].length === 1 ? info[key][0] : info[key];\r\n        }\r\n        for (var i=0; i<info.px.length; i++) {\r\n            info[pxPropertyNames[i]] = parseInt(info.px[i]);\r\n        }\r\n        return info;\r\n    };\r\n    var drawShadow = function(shadow) {\r\n        var info = parseShadow(shadow);\r\n        if (!info.inset) {\r\n            context.shadowOffsetX = info.x;\r\n            context.shadowOffsetY = info.y;\r\n            context.shadowColor = info.color;\r\n            context.shadowBlur = info.blur;\r\n            context.fill();\r\n        }\r\n    };\r\n    var context = this.setFillStyle('white');\r\n    context.save();\r\n    this.shape(shape);\r\n    shadows.forEach(drawShadow, this);\r\n    context.restore();\r\n};\r\n\r\nCanvasRenderer.prototype.drawShape = function(shape, color) {\r\n    this.shape(shape);\r\n    this.setFillStyle(color).fill();\r\n};\r\n\r\nCanvasRenderer.prototype.taints = function(imageContainer) {\r\n    if (imageContainer.tainted === null) {\r\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\r\n        try {\r\n            this.taintCtx.getImageData(0, 0, 1, 1);\r\n            imageContainer.tainted = false;\r\n        } catch(e) {\r\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n            imageContainer.tainted = true;\r\n        }\r\n    }\r\n\r\n    return imageContainer.tainted;\r\n};\r\n\r\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\r\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.clip = function(shapes, callback, context, container) {\r\n    this.ctx.save();\r\n    if (container && container.hasTransform()) {\r\n        this.setTransform(container.inverseTransform());\r\n        shapes.filter(hasEntries).forEach(function(shape) {\r\n            this.shape(shape).clip();\r\n        }, this);\r\n        this.setTransform(container.parseTransform());\r\n    } else {\r\n        shapes.filter(hasEntries).forEach(function(shape) {\r\n            this.shape(shape).clip();\r\n        }, this);\r\n    }\r\n    callback.call(context);\r\n    this.ctx.restore();\r\n};\r\n\r\nCanvasRenderer.prototype.mask = function(shapes, callback, context, container) {\r\n    var borderClip = shapes[shapes.length-1];\r\n    if (borderClip && borderClip.length) {\r\n        var canvasBorderCCW = [\"rect\", this.canvas.width, 0, -this.canvas.width, this.canvas.height];\r\n        var maskShape = [canvasBorderCCW].concat(borderClip).concat([borderClip[0]]);\r\n        shapes = shapes.slice(0,-1).concat([maskShape]);\r\n    }\r\n    this.clip(shapes, callback, context, container);\r\n};\r\n\r\nCanvasRenderer.prototype.shape = function(shape) {\r\n    this.ctx.beginPath();\r\n    shape.forEach(function(point, index) {\r\n        if (point[0] === \"rect\") {\r\n            this.ctx.rect.apply(this.ctx, point.slice(1));\r\n        } else {\r\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\r\n        }\r\n    }, this);\r\n    this.ctx.closePath();\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.path = function(shape) {\r\n    this.ctx.beginPath();\r\n    shape.forEach(function(point, index) {\r\n        if (point[0] === \"rect\") {\r\n            this.ctx.rect.apply(this.ctx, point.slice(1));\r\n        } else {\r\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\r\n        }\r\n    }, this);\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\r\n    variant = /^(normal|small-caps)$/i.test(variant) ? variant : '';\r\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\r\n};\r\n\r\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\r\n    this.setVariable(\"shadowColor\", color.toString())\r\n        .setVariable(\"shadowOffsetY\", offsetX)\r\n        .setVariable(\"shadowOffsetX\", offsetY)\r\n        .setVariable(\"shadowBlur\", blur);\r\n};\r\n\r\nCanvasRenderer.prototype.clearShadow = function() {\r\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\r\n};\r\n\r\nCanvasRenderer.prototype.setOpacity = function(opacity) {\r\n    this.ctx.globalAlpha = opacity;\r\n};\r\n\r\nCanvasRenderer.prototype.setTransform = function(transform) {\r\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\r\n    this.ctx.transform.apply(this.ctx, transform.matrix);\r\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\r\n};\r\n\r\nCanvasRenderer.prototype.setVariable = function(property, value) {\r\n    if (this.variables[property] !== value) {\r\n        this.variables[property] = this.ctx[property] = value;\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\nCanvasRenderer.prototype.text = function(text, left, bottom) {\r\n    this.ctx.fillText(text, left, bottom);\r\n};\r\n\r\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\r\n    var shape = [\r\n        [\"line\", Math.round(left), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(height + top)],\r\n        [\"line\", Math.round(left), Math.round(height + top)]\r\n    ];\r\n    this.clip([shape], function() {\r\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\r\n    }, this);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\r\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\r\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\r\n    this.ctx.translate(offsetX, offsetY);\r\n    this.ctx.fill();\r\n    this.ctx.translate(-offsetX, -offsetY);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\r\n    if (gradientImage instanceof LinearGradientContainer) {\r\n        var gradient = this.ctx.createLinearGradient(\r\n            bounds.left + bounds.width * gradientImage.x0,\r\n            bounds.top + bounds.height * gradientImage.y0,\r\n            bounds.left +  bounds.width * gradientImage.x1,\r\n            bounds.top +  bounds.height * gradientImage.y1);\r\n        gradientImage.colorStops.forEach(function(colorStop) {\r\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\r\n        });\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\r\n    var image = imageContainer.image;\r\n    if(image.width === size.width && image.height === size.height) {\r\n        return image;\r\n    }\r\n\r\n    var ctx, canvas = document.createElement('canvas');\r\n    canvas.width = size.width;\r\n    canvas.height = size.height;\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\r\n    return canvas;\r\n};\r\n\r\nfunction hasEntries(array) {\r\n    return array.length > 0;\r\n}\r\n\r\nmodule.exports = CanvasRenderer;\r\n\r\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\r\n    NodeContainer.call(this, element, parent);\r\n    this.ownStacking = hasOwnStacking;\r\n    this.contexts = [];\r\n    this.children = [];\r\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\r\n}\r\n\r\nStackingContext.prototype = Object.create(NodeContainer.prototype);\r\n\r\nStackingContext.prototype.getParentStack = function(context) {\r\n    var parentStack = (this.parent) ? this.parent.stack : null;\r\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\r\n};\r\n\r\nmodule.exports = StackingContext;\r\n\r\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\r\nfunction Support(document) {\r\n    this.rangeBounds = this.testRangeBounds(document);\r\n    this.cors = this.testCORS();\r\n    this.svg = this.testSVG();\r\n}\r\n\r\nSupport.prototype.testRangeBounds = function(document) {\r\n    var range, testElement, rangeBounds, rangeHeight, support = false;\r\n\r\n    if (document.createRange) {\r\n        range = document.createRange();\r\n        if (range.getBoundingClientRect) {\r\n            testElement = document.createElement('boundtest');\r\n            testElement.style.height = \"123px\";\r\n            testElement.style.display = \"block\";\r\n            document.body.appendChild(testElement);\r\n\r\n            range.selectNode(testElement);\r\n            rangeBounds = range.getBoundingClientRect();\r\n            rangeHeight = rangeBounds.height;\r\n\r\n            if (rangeHeight === 123) {\r\n                support = true;\r\n            }\r\n            document.body.removeChild(testElement);\r\n        }\r\n    }\r\n\r\n    return support;\r\n};\r\n\r\nSupport.prototype.testCORS = function() {\r\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\r\n};\r\n\r\nSupport.prototype.testSVG = function() {\r\n    var img = new Image();\r\n    var canvas = document.createElement(\"canvas\");\r\n    var ctx =  canvas.getContext(\"2d\");\r\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\r\n\r\n    try {\r\n        ctx.drawImage(img, 0, 0);\r\n        canvas.toDataURL();\r\n    } catch(e) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nmodule.exports = Support;\r\n\r\n},{}],23:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar decode64 = _dereq_('./utils').decode64;\r\n\r\nfunction SVGContainer(src) {\r\n    this.src = src;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = this.hasFabric().then(function() {\r\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\r\n    }).then(function(svg) {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGContainer.prototype.hasFabric = function() {\r\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\r\n};\r\n\r\nSVGContainer.prototype.inlineFormatting = function(src) {\r\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\r\n};\r\n\r\nSVGContainer.prototype.removeContentType = function(src) {\r\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\r\n};\r\n\r\nSVGContainer.prototype.isInline = function(src) {\r\n    return (/^data:image\\/svg\\+xml/i.test(src));\r\n};\r\n\r\nSVGContainer.prototype.createCanvas = function(resolve) {\r\n    var self = this;\r\n    return function (objects, options) {\r\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\r\n        self.image = canvas.lowerCanvasEl;\r\n        canvas\r\n            .setWidth(options.width)\r\n            .setHeight(options.height)\r\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\r\n            .renderAll();\r\n        resolve(canvas.lowerCanvasEl);\r\n    };\r\n};\r\n\r\nSVGContainer.prototype.decode64 = function(str) {\r\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\r\n};\r\n\r\nmodule.exports = SVGContainer;\r\n\r\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\n\r\nfunction SVGNodeContainer(node, _native) {\r\n    this.src = node;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = _native ? new Promise(function(resolve, reject) {\r\n        self.image = new Image();\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    }) : this.hasFabric().then(function() {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\r\n\r\nmodule.exports = SVGNodeContainer;\r\n\r\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction TextContainer(node, parent) {\r\n    NodeContainer.call(this, node, parent);\r\n}\r\n\r\nTextContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nTextContainer.prototype.applyTextTransform = function() {\r\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\r\n};\r\n\r\nTextContainer.prototype.transform = function(transform) {\r\n    var text = this.node.data;\r\n    switch(transform){\r\n        case \"lowercase\":\r\n            return text.toLowerCase();\r\n        case \"capitalize\":\r\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\r\n        case \"uppercase\":\r\n            return text.toUpperCase();\r\n        default:\r\n            return text;\r\n    }\r\n};\r\n\r\nfunction capitalize(m, p1, p2) {\r\n    if (m.length > 0) {\r\n        return p1 + p2.toUpperCase();\r\n    }\r\n}\r\n\r\nmodule.exports = TextContainer;\r\n\r\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\r\nexports.smallImage = function smallImage() {\r\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n};\r\n\r\nexports.bind = function(callback, context) {\r\n    return function() {\r\n        return callback.apply(context, arguments);\r\n    };\r\n};\r\n\r\n/*\r\n    * base64-arraybuffer\r\n    * https://github.com/niklasvh/base64-arraybuffer\r\n    *\r\n    * Copyright (c) 2012 Niklas von Hertzen\r\n    * Licensed under the MIT license.\r\n    */\r\n\r\nexports.decode64 = function(base64) {\r\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\r\n\r\n    var output = \"\";\r\n\r\n    for (i = 0; i < len; i+=4) {\r\n        encoded1 = chars.indexOf(base64[i]);\r\n        encoded2 = chars.indexOf(base64[i+1]);\r\n        encoded3 = chars.indexOf(base64[i+2]);\r\n        encoded4 = chars.indexOf(base64[i+3]);\r\n\r\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\r\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\r\n        if (encoded3 === 64) {\r\n            output += String.fromCharCode(byte1);\r\n        } else if (encoded4 === 64 || encoded4 === -1) {\r\n            output += String.fromCharCode(byte1, byte2);\r\n        } else{\r\n            output += String.fromCharCode(byte1, byte2, byte3);\r\n        }\r\n    }\r\n\r\n    return output;\r\n};\r\n\r\nexports.getBounds = function(node) {\r\n    if (node.getBoundingClientRect) {\r\n        var clientRect = node.getBoundingClientRect();\r\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\r\n        return {\r\n            top: clientRect.top,\r\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\r\n            right: clientRect.left + width,\r\n            left: clientRect.left,\r\n            width:  width,\r\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\r\n        };\r\n    }\r\n    return {};\r\n};\r\n\r\nexports.offsetBounds = function(node) {\r\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\r\n\r\n    return {\r\n        top: node.offsetTop + parent.top,\r\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\r\n        right: node.offsetLeft + parent.left + node.offsetWidth,\r\n        left: node.offsetLeft + parent.left,\r\n        width: node.offsetWidth,\r\n        height: node.offsetHeight\r\n    };\r\n};\r\n\r\nexports.parseBackgrounds = function(backgroundImage) {\r\n    var whitespace = ' \\r\\n\\t',\r\n        method, definition, prefix, prefix_i, block, results = [],\r\n        mode = 0, numParen = 0, quote, args;\r\n    var appendResult = function() {\r\n        if(method) {\r\n            if (definition.substr(0, 1) === '\"') {\r\n                definition = definition.substr(1, definition.length - 2);\r\n            }\r\n            if (definition) {\r\n                args.push(definition);\r\n            }\r\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\r\n                prefix = method.substr(0, prefix_i);\r\n                method = method.substr(prefix_i);\r\n            }\r\n            results.push({\r\n                prefix: prefix,\r\n                method: method.toLowerCase(),\r\n                value: block,\r\n                args: args,\r\n                image: null\r\n            });\r\n        }\r\n        args = [];\r\n        method = prefix = definition = block = '';\r\n    };\r\n    args = [];\r\n    method = prefix = definition = block = '';\r\n    backgroundImage.split(\"\").forEach(function(c) {\r\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\r\n            return;\r\n        }\r\n        switch(c) {\r\n        case '\"':\r\n            if(!quote) {\r\n                quote = c;\r\n            } else if(quote === c) {\r\n                quote = null;\r\n            }\r\n            break;\r\n        case '(':\r\n            if(quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                mode = 1;\r\n                block += c;\r\n                return;\r\n            } else {\r\n                numParen++;\r\n            }\r\n            break;\r\n        case ')':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 1) {\r\n                if(numParen === 0) {\r\n                    mode = 0;\r\n                    block += c;\r\n                    appendResult();\r\n                    return;\r\n                } else {\r\n                    numParen--;\r\n                }\r\n            }\r\n            break;\r\n\r\n        case ',':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                appendResult();\r\n                return;\r\n            } else if (mode === 1) {\r\n                if (numParen === 0 && !method.match(/^url$/i)) {\r\n                    args.push(definition);\r\n                    definition = '';\r\n                    block += c;\r\n                    return;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n\r\n        block += c;\r\n        if (mode === 0) {\r\n            method += c;\r\n        } else {\r\n            definition += c;\r\n        }\r\n    });\r\n\r\n    appendResult();\r\n    return results;\r\n};\r\n\r\n},{}],27:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\n\r\nfunction WebkitGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\r\n}\r\n\r\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\nmodule.exports = WebkitGradientContainer;\r\n\r\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\r\nfunction XHR(url) {\r\n    return new Promise(function(resolve, reject) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n\r\n        xhr.onload = function() {\r\n            if (xhr.status === 200) {\r\n                resolve(xhr.responseText);\r\n            } else {\r\n                reject(new Error(xhr.statusText));\r\n            }\r\n        };\r\n\r\n        xhr.onerror = function() {\r\n            reject(new Error(\"Network Error\"));\r\n        };\r\n\r\n        xhr.send();\r\n    });\r\n}\r\n\r\nmodule.exports = XHR;\r\n\r\n},{}]},{},[4])(4)\r\n});","const normalizecss = require('normalize.css');\r\nconst styles = require('../scss/styles.scss');\r\nconst html2canvas = require('./html2canvas');\r\n// const recorder = require('./HZRecorder');\r\nwindow.html2canvas = html2canvas;","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}